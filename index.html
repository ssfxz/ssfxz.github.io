<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="default">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="LiuY&#39;s TechBlog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="LiuY&#39;s TechBlog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LiuY&#39;s TechBlog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>LiuY's TechBlog</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">LiuY's TechBlog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/02/OSM-Tile-Server/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiuY's TechBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/02/OSM-Tile-Server/" itemprop="url">Debian8上搭建OpenStreetMap服务器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-02T10:40:28+08:00">
                2018-03-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>近期的图表需求中强调了GIS地图的优先级，因此我们需要一个稳定且低成本的GIS地图服务器，对比高德和百度的商业合作解决方案后，我们决定使用开源地图OpenStreetMap。</p>
<p>需要强调的是OpenStreetMap的地图数据是免费开源的，但它的地图服务不是，因此如果想使用OpenStreetMap的地图服务，有两个选择：选择付费的服务提供商（例如mapbox）或自己搭建地图服务器，考虑到服务器响应速度和地图的功能需求，最终决定我们自己动手搭建OpenStreetMap瓦片服务器。</p>
<p>本文中使用的服务器操作系统为Debian8.8，部署过程需要root权限。</p>
<h3 id="创建系统用户"><a href="#创建系统用户" class="headerlink" title="创建系统用户"></a>创建系统用户</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">sudo</span> -iu root</div><div class="line"><span class="keyword">adduser </span>youdata</div></pre></td></tr></table></figure>
<h3 id="PostgreSQL-amp-Postgis"><a href="#PostgreSQL-amp-Postgis" class="headerlink" title="PostgreSQL &amp; Postgis"></a>PostgreSQL &amp; Postgis</h3><p>PostgreSQL用来存储地图数据，PostGIS是其地理空间插件，相比MySQL，PostgreSQL拥有更好的几何类型支持和空间数据库扩展。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># root用户安装PostgreSQL和插件</span></div><div class="line">sudo -iu root</div><div class="line">apt install postgresql-<span class="number">9.4</span>-postgis-<span class="number">2.1</span> postgresql-contrib-<span class="number">9.4</span></div><div class="line"></div><div class="line"><span class="comment"># 切换到postgres用户编辑数据库</span></div><div class="line">sudo -iu postgres</div><div class="line">cd ~</div><div class="line"></div><div class="line"><span class="comment"># 创建数据库用户</span></div><div class="line">createuser youdata</div><div class="line"></div><div class="line"><span class="comment"># 创建地图数据库</span></div><div class="line">createdb -E UTF8 -O youdata gis</div><div class="line"></div><div class="line"><span class="comment"># 为gis数据库增加hstore和postgis扩展</span></div><div class="line">psql</div><div class="line">\c gis</div><div class="line">CREATE EXTENSION postgis;</div><div class="line">CREATE EXTENSION hstore;</div><div class="line"><span class="comment"># Should answer CREATE EXTENSION</span></div><div class="line"><span class="keyword">exit</span></div></pre></td></tr></table></figure>
<h3 id="osm2pgsql"><a href="#osm2pgsql" class="headerlink" title="osm2pgsql"></a>osm2pgsql</h3><p>osm2pgsql的作用是将OSM数据转换并导入PostGIS里的工具</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo -iu root</div><div class="line">apt <span class="keyword">install</span> osm2pgsql</div></pre></td></tr></table></figure>
<h3 id="Stylesheet"><a href="#Stylesheet" class="headerlink" title="Stylesheet"></a>Stylesheet</h3><p>获取样式表</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">su youdata</div><div class="line">cd ~</div><div class="line">wget https:<span class="comment">//github.com/gravitystorm/openstreetmap-carto/archive/v2.29.1.tar.gz</span></div><div class="line">tar -xzf v2.<span class="number">29.1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div></pre></td></tr></table></figure>
<h3 id="OSM-Data"><a href="#OSM-Data" class="headerlink" title="OSM Data"></a>OSM Data</h3><p>获取OSM的地图数据</p>
<p><a href="http://download.geofabrik.de/index.html" target="_blank" rel="external">http://download.geofabrik.de/index.html</a><br><a href="http://planet.openstreetmap.org/pbf/" target="_blank" rel="external">http://planet.openstreetmap.org/pbf/</a></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">su</span> youdata</div><div class="line"><span class="keyword">cd</span> ~</div><div class="line">http:<span class="comment">//download.geofabrik.de/asia/china-latest.osm.pbf</span></div></pre></td></tr></table></figure>
<h3 id="导入地图数据"><a href="#导入地图数据" class="headerlink" title="导入地图数据"></a>导入地图数据</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">su youdata</div><div class="line">cd ~</div><div class="line">osm2pgsql --slim -d gis -C <span class="number">6000</span> --hstore -S openstreetmap-carto-<span class="number">2.29</span>.<span class="number">1</span>/openstreetmap-carto<span class="selector-class">.style</span> china-latest<span class="selector-class">.osm</span><span class="selector-class">.pbf</span></div></pre></td></tr></table></figure>
<h3 id="mod-tile"><a href="#mod-tile" class="headerlink" title="mod_tile"></a>mod_tile</h3><p>mod_tile是OSM的地图瓦片服务，没有Debian8的适配版本，需要从源码进行编译</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">su youdata</div><div class="line"><span class="keyword">cd</span> ~</div><div class="line">wget http<span class="variable">s:</span>//github.<span class="keyword">com</span>/openstreetmap/mod_tile/archive/<span class="number">6</span>c2cb243e4c8b047950ab8062cd66245f20a5d2f.tar.gz -O mod_tile.tar.gz</div><div class="line">tar -xzf mod_tile.tar.gz</div><div class="line">mv mod_tile-<span class="number">6</span>c2cb243e4c8b047950ab8062cd66245f20a5d2f mod_tile</div><div class="line"></div><div class="line">sudo -<span class="keyword">iu</span> root</div><div class="line">apt install autoconf libtool libmapnik-dev apache2-dev</div><div class="line"><span class="keyword">exit</span></div><div class="line"></div><div class="line"><span class="keyword">cd</span> mod_tile</div><div class="line">./autogen.<span class="keyword">sh</span></div><div class="line">./configure</div><div class="line"><span class="keyword">make</span></div><div class="line"></div><div class="line">sudo -<span class="keyword">iu</span> root</div><div class="line"><span class="keyword">cd</span> /home/youdata/mod_tile</div><div class="line"><span class="keyword">make</span> install</div><div class="line"><span class="keyword">make</span> install-mod_tile</div><div class="line"><span class="keyword">exit</span></div></pre></td></tr></table></figure>
<h3 id="Mapnik"><a href="#Mapnik" class="headerlink" title="Mapnik"></a>Mapnik</h3><p>Mapnik用于地图渲染</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sudo -iu root</div><div class="line">apt install curl unzip gdal-bin mapnik-utils <span class="keyword">node</span><span class="title">-carto</span></div><div class="line"></div><div class="line">su youdata</div><div class="line">cd ~/openstreetmap-carto-<span class="number">2.29</span>.<span class="number">1</span>/</div><div class="line">./get-shapefiles.sh</div></pre></td></tr></table></figure>
<p>参考资料：<br><a href="https://wiki.debian.org/OSM/tileserver/jessie#Install_mod_tile" target="_blank" rel="external">https://wiki.debian.org/OSM/tileserver/jessie#Install_mod_tile</a><br><a href="https://switch2osm.org/manually-building-a-tile-server-16-04-2-lts/" target="_blank" rel="external">https://switch2osm.org/manually-building-a-tile-server-16-04-2-lts/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/05/JavaScript-memory-leak/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiuY's TechBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/05/JavaScript-memory-leak/" itemprop="url">JavaScript memory leak</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-05T17:28:32+08:00">
                2018-02-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>JavaScript is secretly a functional programming language, and its functions are closures: function objects get access to variables defined in their enclosing scope, even when that scope is finished.</p>
<p><strong>Local variables which are captured by a closure are garbage collected once the function they are defined in has finished and all functions defined inside their scope are themselves GCed.</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> theThing = <span class="literal">null</span>;</div><div class="line"><span class="keyword">var</span> replaceThing = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> originalThing = theThing;</div><div class="line">  theThing = &#123;</div><div class="line">    longStr: <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1000000</span>).join(<span class="string">'*'</span>)</div><div class="line">  &#125;;</div><div class="line">&#125;;</div><div class="line">setInterval(replaceThing, <span class="number">1000</span>);</div></pre></td></tr></table></figure>
<p>Every second, we’ll execute the <strong>replaceThing</strong> function. It replaces <strong>theThing</strong> with a new object containing a newly allocated giant string, saving the original value of <strong>theThing</strong> in the local variable <strong>originalThing</strong>. After it returns, the old value of <strong>theThing</strong> can be garbage collected, including the long string inside it, since nothing remains that refers to it. So the memory used by this code is roughly constant.</p>
<p>But what if we had a closure that outlasted <strong>replaceThing</strong>?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> theThing = <span class="literal">null</span>;</div><div class="line"><span class="keyword">var</span> replaceThing = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> originalThing = theThing;</div><div class="line">  theThing = &#123;</div><div class="line">    longStr: <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1000000</span>).join(<span class="string">'*'</span>),</div><div class="line">    someMethod: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(someMessage);</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">&#125;;</div><div class="line">setInterval(replaceThing, <span class="number">1000</span>);</div></pre></td></tr></table></figure>
<p>Fortunately, modern JavaScript implementations (including, say, the current V8 in Chrome and Node) are smart enough to notice that <strong>originalThing</strong> isn’t <strong>actaully</strong> used in the closure <strong>someMethod</strong>, so it’s not put into someMethod’s lexical environment, and it’s OK to GC the previous theThing when replaceThing finishes.</p>
<p>(But wait, you ask! What if somebody had earlier run <strong>console.log = eval</strong>, and so the seemingly innocuous line <strong>console.log(someMessage)</strong> was actually evaling some code that refers to <strong>originalThing</strong>? Well, the JavaScript standard is one step ahead of you. If you useeval in a sneaky fashion like this (in any way other than by just calling it <strong>eval</strong>), it’s called an “indirect eval”, and it doesn’t actually get to access the lexical environment! If, on the other hand, <strong>someMethod</strong> did contain a direct call to <strong>eval</strong> with that name, it could in fact access <strong>originalThing</strong>, and the JavaScript environment is forbidden from keeping <strong>originalThingout</strong> of the lexical environment and this would end up leaking.)</p>
<p>Well, great! JavaScript protects us from memory leaks, right? Well, let’s try one more version, combining the first two examples.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> theThing = <span class="literal">null</span>; </div><div class="line"><span class="keyword">var</span> replaceThing = <span class="function"><span class="keyword">function</span>（）</span>&#123; </div><div class="line">  <span class="keyword">var</span> originalThing = theThing; </div><div class="line">  <span class="keyword">var</span> unused = <span class="function"><span class="keyword">function</span>（）</span>&#123; </div><div class="line">    <span class="keyword">if</span>（originalThing）</div><div class="line">      <span class="built_in">console</span>.log（“hi”）; </div><div class="line">  &#125;; </div><div class="line">  theThing = &#123; </div><div class="line">    longStr：<span class="keyword">new</span> <span class="built_in">Array</span>（<span class="number">1000000</span>）.join（<span class="string">'*'</span>），</div><div class="line">    someMethod：<span class="function"><span class="keyword">function</span>（）</span>&#123; </div><div class="line">      <span class="built_in">console</span>.log（someMessage）; </div><div class="line">    &#125; </div><div class="line">  &#125;; </div><div class="line">&#125;; </div><div class="line">setInterval（replaceThing，<span class="number">1000</span>）;</div></pre></td></tr></table></figure>
<p>But isn’t this just the same situation as before? <strong>originalThing</strong> is only referenced in the main body of <strong>replaceThing</strong>, and in <strong>unused</strong>. <strong>unused</strong> itself (which we never even run!) gets cleaned up once <strong>replaceThing</strong> ends… the only thing from <strong>replaceThing</strong> that escapes is the second closure, <strong>someMethod</strong>. And <strong>someMethod</strong> doesn’t refer to <strong>originalString</strong> at all!</p>
<p>So even though there’s no way for any code to ever refer to <strong>originalThing</strong> again, it never gets garbage collected! Why? Well, the typical way that closures are implemented is that every function object has a link to a dictionary-style object representing its lexical scope. If both functions defined inside <strong>replaceThing</strong> actually used <strong>originalThing</strong>, it would be important that they both get the same object, even if <strong>originalThing</strong> gets assigned to over and over, so both functions share the same lexical environment. Now, Chrome’s V8 JavaScript engine is apparently smart enough to keep variables out of the lexical environment if they aren’t used byany closures: that’s why the first example doesn’t leak.</p>
<p>But as soon as a variable is used by <strong>any</strong> closure, it ends up in the lexical environment shared byall closures in that scope. And that can lead to memory leaks.</p>
<p>Just add <strong>originalThing = null</strong> to the end of <strong>replaceThing</strong>. That way, even though the name <strong>originalThing</strong> is still in the lexical environment of <strong>someMethod</strong>, there won’t be a link to the big old value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> theThing = <span class="literal">null</span>;</div><div class="line"><span class="keyword">var</span> replaceThing = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> originalThing = theThing;</div><div class="line">  <span class="comment">// Define a closure that references originalThing but doesn't ever</span></div><div class="line">  <span class="comment">// actually get called. But because this closure exists,</span></div><div class="line">  <span class="comment">// originalThing will be in the lexical environment for all</span></div><div class="line">  <span class="comment">// closures defined in replaceThing, instead of being optimized</span></div><div class="line">  <span class="comment">// out of it. If you remove this function, there is no leak.</span></div><div class="line">  <span class="keyword">var</span> unused = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (originalThing)</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">"hi"</span>);</div><div class="line">  &#125;;</div><div class="line">  theThing = &#123;</div><div class="line">    longStr: <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1000000</span>).join(<span class="string">'*'</span>),</div><div class="line">    <span class="comment">// While originalThing is theoretically accessible by this</span></div><div class="line">    <span class="comment">// function, it obviously doesn't use it. But because</span></div><div class="line">    <span class="comment">// originalThing is part of the lexical environment, someMethod</span></div><div class="line">    <span class="comment">// will hold a reference to originalThing, and so even though we</span></div><div class="line">    <span class="comment">// are replacing theThing with something that has no effective</span></div><div class="line">    <span class="comment">// way to reference the old value of theThing, the old value</span></div><div class="line">    <span class="comment">// will never get cleaned up!</span></div><div class="line">    someMethod: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</div><div class="line">  &#125;;</div><div class="line">  <span class="comment">// If you add `originalThing = null` here, there is no leak.</span></div><div class="line">&#125;;</div><div class="line">setInterval(replaceThing, <span class="number">1000</span>);</div></pre></td></tr></table></figure>
<p>So in summary: If you have a large object that is used by some closures, but not by any closures that you need to keep using, just make sure that the local variable no longer points to it once you’re done with it. </p>
<p><a href="https://blog.meteor.com/an-interesting-kind-of-javascript-memory-leak-8b47d2e7f156" target="_blank" rel="external">https://blog.meteor.com/an-interesting-kind-of-javascript-memory-leak-8b47d2e7f156</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/09/新媒体时代的数据可视化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiuY's TechBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/09/新媒体时代的数据可视化/" itemprop="url">新媒体时代的数据可视化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-09T16:08:38+08:00">
                2017-10-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="新媒体时代的数据可视化-–-浙大陈为教授分享"><a href="#新媒体时代的数据可视化-–-浙大陈为教授分享" class="headerlink" title="新媒体时代的数据可视化 – 浙大陈为教授分享"></a>新媒体时代的数据可视化 – 浙大陈为教授分享</h1><h2 id="数据可视化是什么"><a href="#数据可视化是什么" class="headerlink" title="数据可视化是什么"></a>数据可视化是什么</h2><p><img src="/2017/10/09/新媒体时代的数据可视化/v1.png" alt=""><br><img src="/2017/10/09/新媒体时代的数据可视化/v2.png" alt=""></p>
<blockquote>
<p>人眼多线程并行传感器，信息通量很大，一图胜千言</p>
</blockquote>
<h4 id="视觉通道"><a href="#视觉通道" class="headerlink" title="视觉通道"></a>视觉通道</h4><ul>
<li>颜色、大小、形状、宽高、纹理、位置 等</li>
</ul>
<h2 id="可视化的定义"><a href="#可视化的定义" class="headerlink" title="可视化的定义"></a>可视化的定义</h2><p><img src="/2017/10/09/新媒体时代的数据可视化/definition.png" alt=""><br>Computer-based visualization systems provide visual representations of datasts intended to help people carrt out some task more effectively.</p>
<p>几何形态 &lt;==&gt; 数据模型</p>
<h3 id="可视化作用"><a href="#可视化作用" class="headerlink" title="可视化作用"></a>可视化作用</h3><ul>
<li>记录信息</li>
<li>传播信息</li>
<li>分析推理</li>
</ul>
<blockquote>
<p>记录信息</p>
</blockquote>
<h4 id="拿破仑东征"><a href="#拿破仑东征" class="headerlink" title="拿破仑东征"></a>拿破仑东征</h4><p><img src="/2017/10/09/新媒体时代的数据可视化/Napoleon.gif" alt=""><br><a href="https://www.edwardtufte.com/tufte/minard" target="_blank" rel="external">https://www.edwardtufte.com/tufte/minard</a></p>
<p>用图讲故事</p>
<h4 id="NASA-洋流向量场"><a href="#NASA-洋流向量场" class="headerlink" title="NASA 洋流向量场"></a>NASA 洋流向量场</h4><p><a href="https://www.youtube.com/watch?v=CCmTY0PKGDs" target="_blank" rel="external">https://www.youtube.com/watch?v=CCmTY0PKGDs</a></p>
<blockquote>
<p>传播信息</p>
</blockquote>
<h4 id="让子弹飞"><a href="#让子弹飞" class="headerlink" title="让子弹飞"></a>让子弹飞</h4><p><img src="/2017/10/09/新媒体时代的数据可视化/letbulletfly.png" alt=""></p>
<blockquote>
<p>分析推理</p>
</blockquote>
<h4 id="十九世纪伦敦城的死亡地图"><a href="#十九世纪伦敦城的死亡地图" class="headerlink" title="十九世纪伦敦城的死亡地图"></a>十九世纪伦敦城的死亡地图</h4><p><img src="/2017/10/09/新媒体时代的数据可视化/theGhostMap.jpeg" alt=""><br><a href="http://news.ifeng.com/a/20171006/52364520_0.shtml" target="_blank" rel="external">http://news.ifeng.com/a/20171006/52364520_0.shtml</a></p>
<h4 id="水坝分析"><a href="#水坝分析" class="headerlink" title="水坝分析"></a>水坝分析</h4><p>数字模拟参数与结果之间的关系</p>
<h3 id="可视化目标"><a href="#可视化目标" class="headerlink" title="可视化目标"></a>可视化目标</h3><ul>
<li>信：忠实原文</li>
<li>达：通顺,流畅</li>
<li>雅：优雅,美好</li>
</ul>
<h2 id="新媒体时代的数据可视化"><a href="#新媒体时代的数据可视化" class="headerlink" title="新媒体时代的数据可视化"></a>新媒体时代的数据可视化</h2><ul>
<li>雅虎股票走势</li>
<li>东方航空使用tableau</li>
<li>棱镜门事件分析网络数据</li>
</ul>
<p>1987 科学可视化 科研人员 =&gt; 1990 信息可视化 普通用户 =&gt; 2004 可视分析 分析师</p>
<p>可视化 ={ 图形 + 数据 + 设计 + 交互</p>
<h4 id="FPS游戏可视化分析："><a href="#FPS游戏可视化分析：" class="headerlink" title="FPS游戏可视化分析："></a>FPS游戏可视化分析：</h4><p><img src="/2017/10/09/新媒体时代的数据可视化/cs.png" alt=""><br><a href="http://blog.counter-strike.net/science/maps.html" target="_blank" rel="external">http://blog.counter-strike.net/science/maps.html</a></p>
<h4 id="雅虎电子邮件"><a href="#雅虎电子邮件" class="headerlink" title="雅虎电子邮件"></a>雅虎电子邮件</h4><h4 id="路透社新闻"><a href="#路透社新闻" class="headerlink" title="路透社新闻"></a>路透社新闻</h4><h4 id="微博转发"><a href="#微博转发" class="headerlink" title="微博转发"></a>微博转发</h4><h4 id="微软学术搜索-可视化研究"><a href="#微软学术搜索-可视化研究" class="headerlink" title="微软学术搜索 可视化研究"></a>微软学术搜索 可视化研究</h4><h4 id="CNN-COP17-ECOSPHERE-Project"><a href="#CNN-COP17-ECOSPHERE-Project" class="headerlink" title="CNN #COP17 ECOSPHERE Project"></a>CNN #COP17 ECOSPHERE Project</h4><p><a href="WWW.CNN-ECOSPHERE.COM/COP17">WWW.CNN-ECOSPHERE.COM/COP17</a></p>
<h2 id="浙江大学的数据可视化研究"><a href="#浙江大学的数据可视化研究" class="headerlink" title="浙江大学的数据可视化研究"></a>浙江大学的数据可视化研究</h2><ul>
<li>信息监控</li>
<li>计算仿真</li>
<li>商业智能</li>
<li>信息安全</li>
<li>可视化组件库</li>
<li>智慧地球</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/01/Clojure-Development-Environment/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiuY's TechBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/01/Clojure-Development-Environment/" itemprop="url">Clojure Development Environment</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-01T17:08:50+08:00">
                2017-09-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Pre-condition"><a href="#Pre-condition" class="headerlink" title="Pre-condition"></a>Pre-condition</h2><ul>
<li>MAC OS</li>
<li>JDK 1.8</li>
<li>homebrew</li>
<li>IntelliJ IDEA</li>
</ul>
<h2 id="Setup-clojure"><a href="#Setup-clojure" class="headerlink" title="Setup clojure"></a>Setup clojure</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">brew update</div><div class="line"></div><div class="line">brew install leiningen</div><div class="line"></div><div class="line">brew install clojurescript</div></pre></td></tr></table></figure>
<h2 id="ClojureScript-REPL"><a href="#ClojureScript-REPL" class="headerlink" title="ClojureScript REPL"></a>ClojureScript REPL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lein repl</div></pre></td></tr></table></figure>
<blockquote>
<p>exit repl: control + d</p>
</blockquote>
<h2 id="setup-clojure-IDEA-plugin"><a href="#setup-clojure-IDEA-plugin" class="headerlink" title="setup clojure IDEA plugin"></a>setup clojure IDEA plugin</h2><ul>
<li>Leiningen</li>
<li>Cursive</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/30/MongoDB学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiuY's TechBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/30/MongoDB学习笔记/" itemprop="url">MongoDB学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-30T18:59:36+08:00">
                2017-08-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h1><p>基于分布式文件存储的数据库</p>
<p>MongoDB中数据的基本单元称为文档(Document)，它是MongoDB的核心概念，由多个键极其关联的值有序的放置在一起组成，数据库中它对应于关系型数据库的行。</p>
<p>数据在MongoDB中以BSON（Binary-JSON）文档的格式存储在磁盘上。</p>
<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><h3 id="增"><a href="#增" class="headerlink" title="增"></a>增</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">db</span><span class="selector-class">.collection</span><span class="selector-class">.insert</span>(<span class="selector-tag">document</span>);</div><div class="line"><span class="selector-tag">db</span><span class="selector-class">.collection</span><span class="selector-class">.insert</span>(<span class="selector-attr">[doc1, doc2, ...]</span>);</div><div class="line"></div><div class="line"><span class="selector-tag">db</span><span class="selector-class">.person</span><span class="selector-class">.insert</span>(&#123;<span class="attribute">name</span>:<span class="string">"Liuy"</span>, age: <span class="number">27</span>&#125;);</div></pre></td></tr></table></figure>
<h3 id="查"><a href="#查" class="headerlink" title="查"></a>查</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">show</span> <span class="selector-tag">collections</span></div><div class="line"><span class="selector-tag">db</span><span class="selector-class">.collection</span><span class="selector-class">.find</span>();</div><div class="line"><span class="selector-tag">db</span><span class="selector-class">.collection</span><span class="selector-class">.find</span>(<span class="selector-tag">criteria</span>,<span class="selector-tag">projection</span>);</div><div class="line"></div><div class="line"><span class="selector-tag">db</span><span class="selector-class">.person</span><span class="selector-class">.find</span>(&#123;<span class="attribute">age</span>:&#123;$gt:<span class="number">18</span>&#125;&#125;,&#123;<span class="attribute">name</span>:<span class="number">1</span>&#125;)<span class="selector-class">.sort</span>(&#123;<span class="attribute">age</span>:<span class="number">1</span>&#125;)<span class="selector-class">.limit</span>(5);</div></pre></td></tr></table></figure>
<ul>
<li>criteria – 查询条件，文档类型，可选。</li>
<li>projection– 返回的字段，文档类型，可选,若需返回所有字段，则忽略此参数。</li>
</ul>
<h3 id="改"><a href="#改" class="headerlink" title="改"></a>改</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">db.collection.update(query,update,&#123;<span class="string">upsert:</span><span class="keyword">boolean</span>,<span class="string">multi:</span><span class="keyword">boolean</span>&#125;);</div><div class="line">db.collection.save(document);</div><div class="line"></div><div class="line">db.person.update(&#123;<span class="string">age:</span>&#123;<span class="string">$gt:</span><span class="number">18</span>&#125;&#125;,&#123;<span class="string">$set:</span>&#123;<span class="string">status:</span><span class="string">"A"</span>&#125;&#125;,&#123;<span class="string">multi:</span><span class="literal">true</span>&#125;);</div><div class="line">db.person.save(&#123;<span class="string">name:</span><span class="string">"Tony"</span>,<span class="string">age:</span><span class="number">12</span>,<span class="string">gender:</span><span class="string">"man"</span>&#125;);</div></pre></td></tr></table></figure>
<p>save命令可以<strong>更新</strong>或<strong>插入</strong>一个新文档</p>
<ul>
<li>query：查询条件，文档，和find中的查询条件写法一致。</li>
<li>update：修改内容，文档。</li>
<li>upsert(可选)：如果值为true，那么当集合中没有匹配文档时，创建文档。默认false。</li>
<li>multi(可选)：如果值为true，那么将更新全部符合条件的文档，否则仅更新一个文档，默认false。</li>
</ul>
<h3 id="删"><a href="#删" class="headerlink" title="删"></a>删</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">db</span><span class="selector-class">.collection</span><span class="selector-class">.remove</span>(<span class="selector-tag">query</span>,<span class="selector-tag">justOne</span>);</div><div class="line"></div><div class="line"><span class="selector-tag">db</span><span class="selector-class">.person</span><span class="selector-class">.remove</span>(&#123;<span class="attribute">status</span>:<span class="string">"D"</span>&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>query：BSON类型，删除文档的条件。</li>
<li>justOne：布尔类型，true：只删除一个文档，false：默认值，删除所有符合条件的文档。</li>
</ul>
<h2 id="字段查询"><a href="#字段查询" class="headerlink" title="字段查询"></a>字段查询</h2><h3 id="相等条件"><a href="#相等条件" class="headerlink" title="相等条件"></a>相等条件</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">db</span><span class="selector-class">.person</span><span class="selector-class">.find</span>(&#123;<span class="attribute">status</span>:<span class="string">"A"</span>&#125;);</div></pre></td></tr></table></figure>
<h3 id="比较条件"><a href="#比较条件" class="headerlink" title="比较条件"></a>比较条件</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">db</span><span class="selector-class">.person</span><span class="selector-class">.find</span>(&#123;<span class="attribute">age</span>:&#123;$gt:<span class="number">40</span>&#125;&#125;);</div></pre></td></tr></table></figure>
<h3 id="数组条件"><a href="#数组条件" class="headerlink" title="数组条件"></a>数组条件</h3><blockquote>
<p>当字段包含数组，可以进行数组完全匹配或匹配特定的值 </p>
</blockquote>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 数组完全匹配</span></div><div class="line">db.inventory.<span class="built_in">find</span>( &#123; tags: [ <span class="string">'fruit'</span>, <span class="string">'food'</span>, <span class="string">'citrus'</span> ] &#125; );</div><div class="line"></div><div class="line"><span class="comment">// 单个元素匹配</span></div><div class="line">db.inventory.<span class="built_in">find</span>( &#123; tags: <span class="string">'fruit'</span> &#125; );</div><div class="line"></div><div class="line"><span class="comment">// 特定元素匹配  特定元素匹配需要"字段.索引"形式传入参数。</span></div><div class="line">db.inventory.<span class="built_in">find</span>( &#123; <span class="string">'tags.0'</span> : <span class="string">'fruit'</span> &#125; );</div></pre></td></tr></table></figure>
<h3 id="子文档条件"><a href="#子文档条件" class="headerlink" title="子文档条件"></a>子文档条件</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">db.mycol.<span class="builtin-name">find</span>(&#123;<span class="string">"access.level"</span>:5&#125;);</div></pre></td></tr></table></figure>
<h2 id="复合查询-AND-OR"><a href="#复合查询-AND-OR" class="headerlink" title="复合查询 AND/OR"></a>复合查询 AND/OR</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">db.collection.<span class="builtin-name">find</span>(&#123;<span class="variable">$and</span>:[doc1,doc2,<span class="built_in">..</span>.]&#125;)</div><div class="line">db.collection.<span class="builtin-name">find</span>(&#123;<span class="variable">$or</span>:[doc1,doc2,<span class="built_in">..</span>.]&#125;)</div><div class="line"></div><div class="line">db.person.<span class="builtin-name">find</span>(&#123;<span class="variable">$and</span>:[&#123;age:&#123;<span class="variable">$gt</span>:30&#125;&#125;,&#123;name:<span class="string">"Lucy"</span>&#125;]&#125;);</div><div class="line">db.person.<span class="builtin-name">find</span>(&#123;<span class="variable">$or</span>:[&#123;status:<span class="string">"A"</span>&#125;,&#123;age:30&#125;]&#125;);</div></pre></td></tr></table></figure>
<h2 id="游标与结果集"><a href="#游标与结果集" class="headerlink" title="游标与结果集"></a>游标与结果集</h2><h3 id="cursor游标"><a href="#cursor游标" class="headerlink" title="cursor游标"></a>cursor游标</h3><blockquote>
<p>find命令并不直接返回结果，而是返回一个结果集的迭代器，即游标。</p>
</blockquote>
<p>可以使用next方法来遍历游标</p>
<figure class="highlight golo"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myCursor = db.inventory.<span class="keyword">find</span>( &#123; type: <span class="string">"food"</span> &#125; );</div><div class="line"><span class="keyword">var</span> myDocument = myCursor.hasNext() ? myCursor.next() : <span class="literal">null</span>;</div><div class="line"><span class="keyword">if</span> (myDocument) &#123;</div><div class="line">    <span class="keyword">var</span> myItem = myDocument.item;</div><div class="line">    <span class="keyword">print</span>(tojson(myItem));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用forEach方法也能实现游标的遍历<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myCursor =  <span class="keyword">db</span>.inventory.find( &#123; <span class="keyword">type</span>: <span class="string">"food"</span> &#125; );</div><div class="line">myCursor.<span class="keyword">forEach</span>(printjson);</div></pre></td></tr></table></figure></p>
<h3 id="结果集"><a href="#结果集" class="headerlink" title="结果集"></a>结果集</h3><p>限制条件<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">db</span><span class="selector-class">.collection</span><span class="selector-class">.find</span>()<span class="selector-class">.limit</span>(<span class="selector-tag">Num</span>)</div><div class="line"><span class="selector-tag">db</span><span class="selector-class">.person</span><span class="selector-class">.find</span>(&#123;&#125;,&#123;<span class="attribute">name</span>:<span class="number">1</span>&#125;)</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/05/Gopher杭州Meetup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiuY's TechBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/05/Gopher杭州Meetup/" itemprop="url">Gopher杭州Meetup</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-05T15:16:54+08:00">
                2017-08-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Gopher杭州Meetup"><a href="#Gopher杭州Meetup" class="headerlink" title="Gopher杭州Meetup"></a>Gopher杭州Meetup</h1><h2 id="可视化学习-Go-并发编程"><a href="#可视化学习-Go-并发编程" class="headerlink" title="可视化学习 Go 并发编程"></a>可视化学习 Go 并发编程</h2><h3 id="黄庆兵-网易"><a href="#黄庆兵-网易" class="headerlink" title="黄庆兵:网易"></a>黄庆兵:网易</h3><blockquote>
<p>围绕Go并发编程，结合gotrace工具，让你眼见为实学习Go并发编程</p>
</blockquote>
<p>GoTrace + three.js</p>
<p><strong>算法可视化</strong></p>
<h2 id="基于Go的大数据平台"><a href="#基于Go的大数据平台" class="headerlink" title="基于Go的大数据平台"></a>基于Go的大数据平台</h2><h3 id="陈超-七牛"><a href="#陈超-七牛" class="headerlink" title="陈超:七牛"></a>陈超:七牛</h3><blockquote>
<p>大数据一直是我们在谈论的话题，不管你数据到底有多大？陈超带来全新的大数据处理思路。</p>
</blockquote>
<p>七牛云广告</p>
<p><strong>分布式计算调度算法</strong>: 根据CPU、内存、网络、任务分布度等系统资源占用情况进行打分 </p>
<h2 id="Kubernetes语境下的基于Golang的编程范式"><a href="#Kubernetes语境下的基于Golang的编程范式" class="headerlink" title="Kubernetes语境下的基于Golang的编程范式"></a>Kubernetes语境下的基于Golang的编程范式</h2><h3 id="张磊-Hyper项目成员，Kubernetes项目官方Project-Manager和Feature-Maintainer"><a href="#张磊-Hyper项目成员，Kubernetes项目官方Project-Manager和Feature-Maintainer" class="headerlink" title="张磊:Hyper项目成员，Kubernetes项目官方Project Manager和Feature Maintainer"></a>张磊:Hyper项目成员，Kubernetes项目官方Project Manager和Feature Maintainer</h3><blockquote>
<p>介绍Kubernetes项目中面向Etcd的对象控制器、工作队列、自定义资源、容器运行时接口等一系列基于Golang的编程范式，同时讲解开发者如何使用这些范式来“无损”地扩展Kubernetes核心能力的最佳实践。</p>
</blockquote>
<ul>
<li><p>Kubernetes<br>  Kubernetes作为Docker生态圈中重要一员，是Google多年大规模容器管理技术的开源版本，是产线实践经验的最佳表现[G1] 。<br>面向 API ”OO“ Programming</p>
</li>
<li><p>etcd<br>  可用强一致性的服务发现存储仓库  </p>
</li>
<li><p>gRPC<br>  是一个高性能、通用的开源RPC框架，其由Google主要面向移动应用开发并基于HTTP/2协议标准而设计，基于ProtoBuf(Protocol Buffers)序列化协议开发，且支持众多开发语言。</p>
</li>
<li><p>RPC<br>  远程过程调用（英语：Remote Procedure Call，縮寫為RPC）是一个计算机通信协议。 该协议允许运行于一台计算机的程序调用另一台计算机的子程序，而程序员无需额外地为这个交互作用编程。</p>
</li>
</ul>
<h2 id="基于Mesos的容器调度框架"><a href="#基于Mesos的容器调度框架" class="headerlink" title="基于Mesos的容器调度框架"></a>基于Mesos的容器调度框架</h2><h3 id="黄励博-又拍云"><a href="#黄励博-又拍云" class="headerlink" title="黄励博:又拍云"></a>黄励博:又拍云</h3><blockquote>
<p>为了更好地完成云处理服务的负载均衡，零停机升级，自定义策略调度等功能，又拍云用Go实现了自己的容器调度框架<strong>upone</strong>，管理长期服务和定时任务。</p>
</blockquote>
<ul>
<li>Raft<br>Raft 是一种用来管理日志复制的一致性算法</li>
</ul>
<p>报警使用slack</p>
<h2 id="Go使用gRPC-http打造高性能微服务"><a href="#Go使用gRPC-http打造高性能微服务" class="headerlink" title="Go使用gRPC+http打造高性能微服务"></a>Go使用gRPC+http打造高性能微服务</h2><h3 id="谢孟军：GoCN"><a href="#谢孟军：GoCN" class="headerlink" title="谢孟军：GoCN"></a>谢孟军：GoCN</h3><blockquote>
<p>GRPC已成为互联网最佳的通讯标准，如何打造一个高性能的微服务？</p>
</blockquote>
<h3 id="微服务-MicroServices"><a href="#微服务-MicroServices" class="headerlink" title="微服务 MicroServices"></a>微服务 MicroServices</h3><blockquote>
<p>小、独立服务<br>微服务可以按照功能来划分，或披萨理论，开发到部署3-4个人</p>
</blockquote>
<h3 id="gRPC"><a href="#gRPC" class="headerlink" title="gRPC"></a>gRPC</h3><blockquote>
<p>基于HTTP/2 POST protobuf</p>
</blockquote>
<table>
<thead>
<tr>
<th>JSON</th>
<th>protobuf</th>
</tr>
</thead>
<tbody>
<tr>
<td>plaintext</td>
<td>binary</td>
</tr>
<tr>
<td>human readable</td>
<td>machine readable</td>
</tr>
<tr>
<td>repetitive</td>
<td>compressed</td>
</tr>
<tr>
<td>fast (de)serialization</td>
<td>faster (de) serialization</td>
</tr>
<tr>
<td>Everything supports it</td>
<td>limited support</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>HTTP/1.1</th>
<th>HTTP/2</th>
</tr>
</thead>
<tbody>
<tr>
<td>plaintext</td>
<td>binary</td>
</tr>
<tr>
<td>no pipelining</td>
<td>native pipelining</td>
</tr>
<tr>
<td>new connection per request</td>
<td>persistent TCP</td>
</tr>
<tr>
<td>repetitive</td>
<td>compressed</td>
</tr>
<tr>
<td>polling</td>
<td>streaming</td>
</tr>
<tr>
<td>Non-secure by default</td>
<td>TLS by default</td>
</tr>
<tr>
<td>Everything supports it</td>
<td>limited support</td>
</tr>
</tbody>
</table>
<ul>
<li>REST<br>  REpresentational State Transfer，全称是 Resource Representational State Transfer：通俗来讲就是：资源在网络中以某种表现形式进行状态转移。<br>  URL定位资源，用HTTP动词（GET,POST,DELETE,DETC）描述操作。</li>
</ul>
<h3 id="如何使用gRPC-http打造微服务"><a href="#如何使用gRPC-http打造微服务" class="headerlink" title="如何使用gRPC+http打造微服务"></a>如何使用gRPC+http打造微服务</h3><h3 id="为什么GO适合做微服务"><a href="#为什么GO适合做微服务" class="headerlink" title="为什么GO适合做微服务"></a>为什么GO适合做微服务</h3><ul>
<li>小</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/04/NEV图表对比/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiuY's TechBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/04/NEV图表对比/" itemprop="url">NEV与其他图表引擎的横向对比</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-04T11:08:44+08:00">
                2017-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="NEV与其他图表引擎的横向对比"><a href="#NEV与其他图表引擎的横向对比" class="headerlink" title="NEV与其他图表引擎的横向对比"></a>NEV与其他图表引擎的横向对比</h1><blockquote>
<p>对比的其他图表库包括<strong>vega</strong>、<strong>HighCharts</strong>、 <strong>ECharts</strong>以及<strong>G2</strong></p>
</blockquote>
<h2 id="图表类型"><a href="#图表类型" class="headerlink" title="图表类型"></a>图表类型</h2><ul>
<li>柱状图</li>
</ul>
<table>
<thead>
<tr>
<th>—-</th>
<th>vega</th>
<th>HighCharts</th>
<th>Echarts</th>
<th>G2</th>
<th>NEV</th>
</tr>
</thead>
<tbody>
<tr>
<td>堆叠柱状图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>并列柱状图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>百分比堆叠柱状图</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
<td>✅表计算</td>
</tr>
<tr>
<td>并列堆叠柱状图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>转置柱状图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
<ul>
<li>折线图、区域图</li>
</ul>
<table>
<thead>
<tr>
<th>—-</th>
<th>vega</th>
<th>HighCharts</th>
<th>Echarts</th>
<th>G2</th>
<th>NEV</th>
</tr>
</thead>
<tbody>
<tr>
<td>普通折线图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>平滑折线图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>转置折线图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>区域图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>百分比堆叠区域图</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
<td>✅表计算</td>
</tr>
<tr>
<td>范围区域图</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>转置区域图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
<ul>
<li>饼图</li>
</ul>
<table>
<thead>
<tr>
<th>—-</th>
<th>vega</th>
<th>HighCharts</th>
<th>Echarts</th>
<th>G2</th>
<th>NEV</th>
</tr>
</thead>
<tbody>
<tr>
<td>饼图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>玫瑰图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>环形图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>环形玫瑰图</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>笛卡尔饼图</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
</tr>
</tbody>
</table>
<ul>
<li>散点图、气泡图</li>
</ul>
<table>
<thead>
<tr>
<th>—-</th>
<th>vega</th>
<th>HighCharts</th>
<th>Echarts</th>
<th>G2</th>
<th>NEV</th>
</tr>
</thead>
<tbody>
<tr>
<td>散点图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>文本图</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td>气泡图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
<ul>
<li>地图</li>
</ul>
<table>
<thead>
<tr>
<th>—-</th>
<th>vega</th>
<th>HighCharts</th>
<th>Echarts</th>
<th>G2</th>
<th>NEV</th>
</tr>
</thead>
<tbody>
<tr>
<td>地图散点图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>填充地图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>迁徙地图</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>❌</td>
<td>✅nev-lite</td>
</tr>
<tr>
<td>热力地图</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅nev-lite</td>
</tr>
</tbody>
</table>
<ul>
<li>组合图</li>
</ul>
<table>
<thead>
<tr>
<th>—-</th>
<th>vega</th>
<th>HighCharts</th>
<th>Echarts</th>
<th>G2</th>
<th>NEV</th>
</tr>
</thead>
<tbody>
<tr>
<td>折现柱状图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>散点柱状图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>地图饼图</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
</tr>
</tbody>
</table>
<ul>
<li>高级图表</li>
</ul>
<table>
<thead>
<tr>
<th>—-</th>
<th>vega</th>
<th>HighCharts</th>
<th>Echarts</th>
<th>G2</th>
<th>NEV</th>
</tr>
</thead>
<tbody>
<tr>
<td>子弹图</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td>仪表图</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>树图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>词云</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td>漏斗图</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>热力图</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>3D图</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>关系图</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>雷达图</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>箱线图</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>平行坐标系</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>桑基图</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>瀑布图</td>
<td>❌</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td>甘特图</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
</tr>
</tbody>
</table>
<ul>
<li>图表高级功能</li>
</ul>
<table>
<thead>
<tr>
<th>—-</th>
<th>vega</th>
<th>HighCharts</th>
<th>Echarts</th>
<th>G2</th>
<th>NEV</th>
</tr>
</thead>
<tbody>
<tr>
<td>对数轴</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>时间轴</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>双轴</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>透视</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>参考线</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td>主题样式</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
</tr>
</tbody>
</table>
<h2 id="移动端定制版支持"><a href="#移动端定制版支持" class="headerlink" title="移动端定制版支持"></a>移动端定制版支持</h2><table>
<thead>
<tr>
<th>图表库</th>
<th>详细</th>
</tr>
</thead>
<tbody>
<tr>
<td>vega</td>
<td>❌</td>
</tr>
<tr>
<td>HighCharts</td>
<td>❌</td>
</tr>
<tr>
<td>Echarts</td>
<td>❌</td>
</tr>
<tr>
<td>G2</td>
<td>✅ 有移动端版，但该仅支持部分图表且无交互</td>
</tr>
<tr>
<td>NEV</td>
<td>✅ 几乎所有图表均提供移动端定制版，且针对移动端提供定制化交互</td>
</tr>
</tbody>
</table>
<h2 id="交互丰富程度与定制性"><a href="#交互丰富程度与定制性" class="headerlink" title="交互丰富程度与定制性"></a>交互丰富程度与定制性</h2><table>
<thead>
<tr>
<th>图表库</th>
<th>交互丰富程度</th>
<th>移动端交互</th>
<th>可定制性</th>
</tr>
</thead>
<tbody>
<tr>
<td>vega</td>
<td>⭐️⭐️</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td>HighCharts</td>
<td>⭐️⭐️</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>Echarts</td>
<td>⭐️⭐️⭐️⭐️⭐️</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>G2</td>
<td>⭐️⭐️⭐️⭐️</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>NEV</td>
<td>⭐️⭐️⭐️⭐️</td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
<h2 id="图表扩展组合能力"><a href="#图表扩展组合能力" class="headerlink" title="图表扩展组合能力"></a>图表扩展组合能力</h2><table>
<thead>
<tr>
<th>图表库</th>
<th>详细</th>
</tr>
</thead>
<tbody>
<tr>
<td>vega</td>
<td>✅</td>
</tr>
<tr>
<td>HighCharts</td>
<td>❌</td>
</tr>
<tr>
<td>Echarts</td>
<td>❌</td>
</tr>
<tr>
<td>G2</td>
<td>✅    </td>
</tr>
<tr>
<td>NEV</td>
<td>✅</td>
</tr>
</tbody>
</table>
<h2 id="接口功能与易用性"><a href="#接口功能与易用性" class="headerlink" title="接口功能与易用性"></a>接口功能与易用性</h2><table>
<thead>
<tr>
<th>图表库</th>
<th>接口功能</th>
<th>易用性</th>
</tr>
</thead>
<tbody>
<tr>
<td>vega</td>
<td>⭐️⭐️⭐️⭐️</td>
<td>⭐️⭐️</td>
</tr>
<tr>
<td>HighCharts</td>
<td>⭐️⭐️</td>
<td>⭐️⭐️⭐️⭐️</td>
</tr>
<tr>
<td>Echarts</td>
<td>⭐️⭐️</td>
<td>⭐️⭐️⭐️⭐️</td>
</tr>
<tr>
<td>G2</td>
<td>⭐️⭐️⭐️⭐️</td>
<td>⭐️⭐️⭐️⭐️</td>
</tr>
<tr>
<td>NEV</td>
<td>⭐️⭐️⭐️⭐️⭐️</td>
<td>⭐️⭐️</td>
</tr>
</tbody>
</table>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li><p><strong>vega</strong>: 绘图功能强大，遵循图形语法，因此带来了强大的图表组合能力，但由于是非商业化的开源项目，因此在视觉、交互等方面有所欠缺，而且接口复杂，学习曲线略微陡峭。</p>
</li>
<li><p><strong>HighCharts</strong>: 图表类型丰富，不支持图表元素组合扩展，带有商业性质的项目，商业用途需购买授权，难以进行二次开发，对于不支持的图表难以扩展。</p>
</li>
<li><p><strong>Echarts</strong>: 图表类型丰富，提供良好的视觉和交互体验，不遵循图形语法，不能进行图表组合扩展，免费开源项目，可以用于商业用途，难以进行二次开发，对于不支持的图表难以扩展。</p>
</li>
<li><p><strong>G2</strong>: 遵循图形语法，接口使用方便，非开源项目，各方面能力较为均衡。</p>
</li>
<li><p><strong>NEV</strong>: 遵循图形语法，具有图表组合扩展能力，支持用户进行高度定制化的配置需求，提供良好的视觉和交互体验，提供移动端定制版，支持交互定制，高度支持图表透视功能，缺点是用户接口使用略有不便。</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/22/来聊聊地图投影的学问/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiuY's TechBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/22/来聊聊地图投影的学问/" itemprop="url">来聊聊地图投影的学问</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-22T02:10:43+08:00">
                2017-03-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="来聊聊地图投影的学问"><a href="#来聊聊地图投影的学问" class="headerlink" title="来聊聊地图投影的学问"></a>来聊聊地图投影的学问</h1><blockquote>
<p>地图所有人都很熟悉，但估计许多人都不知道我们平时看到的地图中是存在许多门道的，今天我就来一一道来。</p>
</blockquote>
<p>先来看看我们平时最常见的世界地图是长这样的。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/1.jpg" alt=""></p>
<p>我们很容易联想到这样一个图形是无法平整的贴在一个球体表面的。真正要帖在球体表面的地图是下图这样的，而且即便如此，也只是近似平整而已。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/2.jpg" alt=""></p>
<p>由于地球是一个近似球体，地球表面是一个不可展开面，因此将地球表面展开后必然会出现撕裂和褶皱。将三维的地球表面映射到二维平面的过程就是地图的投影。而由于空间维度的降低，在投影的过程中，地图的扭曲和形变是无法避免的，因此，在绘制世界地图时，面积、方向和距离是无法全部顾及到。</p>
<p>以刚刚的世界地图举例：上面的世界地图采用的投影方式叫做<strong>等差分纬线多圆锥投影</strong>，该投影中纬线为对称于赤道的同轴圆圆弧，圆心位于中央经线上。中央经线为一直线，其它经线为对称于中央经线的曲线，且离中央经线越远，其经线间隔成比例地递减；极点表示为圆弧，其长度为赤道投影长度的二分之一，经纬网的图形有球形感。我国被配置在地图中接近于中央的位置，保持太平洋完整。由于该投影的性质是接近等面积的任意投影，因此我国绝大部分地区面积变形小。在中学使用的世界地图中的世界的气候类型和洋流图、世界政区图和自然带的分布图都是采用的这种投影图。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/3.jpg" alt=""></p>
<p>上图显示了等差分纬线多圆锥投影投影形变的程度，图中的1.0线表示面积形变为0，大于1.0表示图上面积比起实际面积放大了，小于1.0表示图上面积比起实际面积缩小了。我国之所以普遍采用这种投影方式也有一部分原因是我国大部分国土面积都处于低形变程度的地图中。</p>
<p>此外，使用这种投影还存在的问题是：<strong>即使是在实际中互相垂直的方向，在地图中却表现为非垂直</strong>。例如下图中的经线和纬线。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/4.png" alt=""></p>
<p>为了真实表示地图中的方向，就得提到大名鼎鼎的<strong>墨卡托投影（Mercator Projection）</strong>，其投影出的世界地图如下图所示，经线纬线互相垂直并且方向正确。墨卡托投影被广泛应用例如谷歌地图、网易有数等地图场景（此处为硬广：<strong>网易有数</strong>能够绘制填充地图、地图散点图等多种图表类型，并且提供面向全国省市级的可视化数据分析功能，快戳<a href="http://youdata.163.com" target="_blank" rel="external">http://youdata.163.com</a>试用）</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/5.jpg" alt=""></p>
<p>墨卡托投影是圆柱投影的一种，是由地理学家墨卡托于16世纪发明的。和所有其它的圆柱投影一样，麦卡托投影的世界地图中，地球纬线是左右方向平行的，长度一样，覆盖整个地图的画幅；而经线是上下方向平行，垂直于纬线。然而在现实世界里，这显然是不对的：如果你拿来一个地球仪仔细观察，就能发现地球的纬线虽然是平行的，但长度却不一样：赤道最长，越往两级方向越短。而经线虽然都是一样长的，但它们并不平行，而是在南极和北极交汇成点。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/6.jpg" alt=""></p>
<p>墨卡托投影的绘制方式是将一张纸卷成圆筒状包住地球，纸面接触地球赤道，模拟地球球心为光源，将地球表面轮廓照射到圆筒上从而形成的地图。在赤道上，由于地球和纸面接触，因此投影出的面积和方向也是完全真实的。然而，离开赤道往南北级方向可以明显发现，投影出的图案面积发生了形变。由于光源在球心，因此南极点和北极点将不会出现在投影中，甚至两级的极圈也不会被投影在地图中。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/7.png" alt=""></p>
<p>假设R为赤道半径，r为北纬60度纬线的半径。r/R=sin(90-60)=0.5，周长=2 <em> pi </em> 半径，因此赤道的半径是北纬60度的2倍。然而，在墨卡托投影的世界地图里，北纬六十度和赤道是一样长的。因此为了保持大陆的形状，在北纬六十度，地图的南北方向也被拉长了2倍。因此，在墨卡托投影的地图中，高纬度的地区会被放大许多。</p>
<p>这种放大有多夸张呢，这里给大家几张动图感受一下。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/中国.gif" alt=""><br><img src="/2017/03/22/来聊聊地图投影的学问/俄罗斯.gif" alt=""><br><img src="/2017/03/22/来聊聊地图投影的学问/格陵兰岛.gif" alt=""></p>
<p>链接在这里，自己玩玩吧：<a href="http://thetruesize.com" target="_blank" rel="external">http://thetruesize.com</a></p>
<p>然而，即使墨卡托投影存在这样的问题，依然难以阻挡它的广泛应用，另外，选取不同的基准线，画出的地图也可以有不同的特性。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/8.png" alt=""></p>
<p>这里再介绍几种常见的投影方式以作对比：</p>
<p>最后还要强调一点墨卡托投影或者说大多数投影都存在的一个误区：<strong>地图上两点之间的距离未必是实际中的最短距离</strong>。例如从英国伦敦飞到美国西雅图的民航航线是这样的：</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/9.jpg" alt=""></p>
<p>弧线是航班的真实路线。而在平面投影或地球仪上可以明显观察到，上图中这条弧线才是两座城市间的最近距离。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/10.jpg" alt=""></p>
<ul>
<li>等角度投影</li>
</ul>
<p><strong>正切方位投影</strong>，主要用于两极地区地图。以极地为投影中心，又称球面极地投影。纬线为以极为中心的同心圆，经线为由极向四周辐射的直线，纬距由中心向外扩大。投影中央部分的长度和面积变形小，向外逐渐增大。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/11.jpg" alt=""></p>
<ul>
<li>等面积投影</li>
</ul>
<p><strong>摩尔威德投影</strong>是一种伪圆柱投影，和圆柱投影有相似之处，但又用数学方法进行了优化。这种投影方法保持了面积的准确性，也在较大的程度上控制了形状的形变量。它选择一条经线最作为基准，然后把这条经线向东和向西各90度的两条组成大圆的经线在地图上画成一个圆，效果如图所示： </p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/12.png" alt=""></p>
<ul>
<li>等距离投影</li>
</ul>
<p><strong>等距离圆柱投影</strong>（Equidistant Cylindrical Projection）。它是公认的所有地图投影里，数学变换最简单的一种。麦卡托投影在高纬度地区为了保持形状的准确而将纬线之间的距离拉长；等距离圆锥投影的所有相邻经线和纬线之间的距离都是一样的。因此，在南北方向上，地图上任意两点的距离是保持精确的。这种地图缺点很多，既不保持形状的准确，也不保证面积的准确。但因为它制作简单，因此很多时候它被用作索引地图（例如世界各国列表）或示意地图（例如时区、货币分布、国际组织成员分布等地图）的投影。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/13.png" alt=""></p>
<ul>
<li>面积、角度、距离最折中的方案</li>
</ul>
<p><strong>罗宾逊投影</strong>（Robinson Projection）。前面一直在讨论，在把3维的地球转化为2维的地图的过程中，等方面的精确度不能个个都保全。于是，制图学家们开始寻找有没有折中方案，让这几方面的变形程度尽可能最小化。罗宾逊投影就是这些尝试的其中一个结果。它的效果如下： </p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/14.jpg" alt=""></p>
<p>罗宾逊投影中，形状、面积和角度等都做不到精确，然而它们之间进行了互相的妥协。和麦卡托地图相比，它的陆地轮廓形状发生了可以接受的扭曲，而高纬度地区的面积变化虽然还存在，但也变小了不少。这种投影方法被发明后，很快就被用于绘制各种各样的世界地图了。</p>
<p>所以说，究竟有没有一种等积等距等角度的地图呢？当然有，买个地球仪吧。</p>
<p><img src="/2017/03/22/来聊聊地图投影的学问/15.jpg" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/12/地图数据中的GeoJson与TopoJson/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiuY's TechBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/12/地图数据中的GeoJson与TopoJson/" itemprop="url">地图数据中的GeoJson与TopoJson</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-12T17:48:54+08:00">
                2016-12-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="地图数据中的GeoJson与TopoJson"><a href="#地图数据中的GeoJson与TopoJson" class="headerlink" title="地图数据中的GeoJson与TopoJson"></a>地图数据中的GeoJson与TopoJson</h1><blockquote>
<p>近期工作中遇到了图表库地图数据的合并以及压缩的需求，需要将目前图表库中目前使用的GeoJSON数据格式替换为TopoJSON，现在将GeoJSON与TopoJSON的异同进行整理如下。</p>
</blockquote>
<p>地图图表是数据可视化中的一种常用的图表类型，主要用于表达基于地理位置的区域性数据。</p>
<p>目前常用于表示地理信息的数据结构主要有两种格式：<strong>GeoJSON</strong> 与 <strong>TopoJSON</strong>。</p>
<h3 id="GeoJSON"><a href="#GeoJSON" class="headerlink" title="GeoJSON"></a>GeoJSON</h3><p>GeoJSON 是用于描述一系列几何形状的数据结构，其语法采用 JSON 的语法规范，同时也是一个独立的JavaScript对象，可以用于表示<strong>几何体（Geometry）、特征（Feature）或者特征集合（FeatureCollection）</strong>。</p>
<p>GeoJSON可以包含多个几何类型子对象，用type属性区分。当type取下列值时表示几何体：</p>
<ul>
<li>Point（点）</li>
<li>MultiPoint（多点）</li>
<li>LineString（线）</li>
<li>MultiLineString（多线）</li>
<li>Polygon（面）</li>
<li>MultiPolygon（多面）</li>
</ul>
<p>所有几何体对象都包含coordinates属性，用于表示坐标点，其至少应包含两个元素，也可以包含更多元素以表示更高维度，但必须按照x,y,z顺序排列。<br>示例如下：</p>
<ul>
<li>点对象：</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"type"</span>: <span class="string">"Point"</span>,</div><div class="line">    <span class="attr">"coordinates"</span>: [<span class="number">100</span>, <span class="number">100</span>]&#125;</div></pre></td></tr></table></figure>
<ul>
<li>线对象：</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;    <span class="attr">"type"</span>: <span class="string">"LineString"</span>,    <span class="attr">"coordinates"</span>: [[<span class="number">100</span>, <span class="number">100</span>], [<span class="number">200</span>, <span class="number">200</span>]]&#125;</div></pre></td></tr></table></figure>
<ul>
<li>面对象：</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;    <span class="attr">"type"</span>: <span class="string">"Polygon"</span>,    <span class="attr">"coordinates"</span>:[[[<span class="number">100</span>, <span class="number">100</span>], [<span class="number">100</span>, <span class="number">200</span>], [<span class="number">200</span>, <span class="number">200</span>], [<span class="number">200</span>, <span class="number">100</span>], [<span class="number">100</span>, <span class="number">100</span>]]]&#125;</div></pre></td></tr></table></figure>
<p>当type取GeometryCollection（几何体集合）时，GeometryCollection必须包含一个geometries变量，其值是一个几何对象数组。</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&#123;    <span class="string">"type"</span>: <span class="string">"GeometryCollection"</span>,    <span class="string">"geometries"</span>: [        &#123;            <span class="string">"type"</span>: <span class="string">"Point"</span>,            <span class="string">"coordinates"</span>: [<span class="number">100</span>, <span class="number">100</span>]        &#125;,        &#123;            <span class="string">"type"</span>: <span class="string">"LineString"</span>,            <span class="string">"coordinates"</span>: [ [<span class="number">100</span>, <span class="number">100</span>], [<span class="number">200</span>, <span class="number">200</span>] ]        &#125;    ]&#125;</div><div class="line"><span class="string">``</span><span class="string">` 当type取Feature（特征）时，表示其除了包含几何体信息外，还包含有一个 properties属性，其内容可以是任意的JSON对象或null。</span></div></pre></td></tr></table></figure>
<p>{<br>    “type”: “Feature”,<br>    “properties”: {<br>        “id”: “CHN_北京”,<br>        “name”: “北京”,<br>    },<br>    “geometry”: {<br>        “type”: “Point”,<br>        “coordinates”: [ 116.3671875, 39.9771201]<br>    }<br>}</p>
<pre><code>
当type取FeatureCollection（特征集合）时，表示包含多个Feature Objects，其需要包含features属性，内容为由多个feature组成的数组。

### TopoJSON

在D3.js中还有一种常用的数据格式TopoJSON，TopoJSON是GeoJSON 按拓扑学编码后的扩展形式，是由D3.js的作者Mike Bostock制定的。通过将图形中公共点统一存储来减少冗余，可以有效减小GeoJSON文件的体积。

TopoJSON主要通过以下方式减小文件的体积。

- 通过arcs（弧线）来描述数据，每条弧只被定义一次，可以被多次引用，引用是只需要调用index即可。  
将浮点数转化为整数，最后通过transform进行图形的变换。
- 除了第一个点以外，其他点存储的均是相对位置。  
引用官方的一个示例：

<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;  <span class="attr">"type"</span>: <span class="string">"Topology"</span>,  <span class="attr">"objects"</span>: &#123;    <span class="attr">"example"</span>: &#123;      <span class="attr">"type"</span>: <span class="string">"GeometryCollection"</span>,      <span class="attr">"geometries"</span>: [        &#123;          <span class="attr">"type"</span>: <span class="string">"Point"</span>,          <span class="attr">"properties"</span>: &#123;            <span class="attr">"prop0"</span>: <span class="string">"value0"</span>          &#125;,          <span class="attr">"coordinates"</span>: [<span class="number">102</span>, <span class="number">0.5</span>]        &#125;,        &#123;          <span class="attr">"type"</span>: <span class="string">"LineString"</span>,          <span class="attr">"properties"</span>: &#123;            <span class="attr">"prop0"</span>: <span class="string">"value0"</span>,            <span class="attr">"prop1"</span>: <span class="number">0</span>          &#125;,          <span class="attr">"arcs"</span>: [<span class="number">0</span>]        &#125;,        &#123;          <span class="attr">"type"</span>: <span class="string">"Polygon"</span>,          <span class="attr">"properties"</span>: &#123;            <span class="attr">"prop0"</span>: <span class="string">"value0"</span>,            <span class="attr">"prop1"</span>: &#123;              <span class="attr">"this"</span>: <span class="string">"that"</span>            &#125;          &#125;,          <span class="attr">"arcs"</span>: [[<span class="number">-2</span>]]        &#125;      ]    &#125;  &#125;,  <span class="attr">"arcs"</span>: [    [[<span class="number">102</span>, <span class="number">0</span>], [<span class="number">103</span>, <span class="number">1</span>], [<span class="number">104</span>, <span class="number">0</span>], [<span class="number">105</span>, <span class="number">1</span>]],    [[<span class="number">100</span>, <span class="number">0</span>], [<span class="number">101</span>, <span class="number">0</span>], [<span class="number">101</span>, <span class="number">1</span>], [<span class="number">100</span>, <span class="number">1</span>], [<span class="number">100</span>, <span class="number">0</span>]]  ]&#125;</div></pre></td></tr></table></figure>


值得说明的是，由于描述的数据时有向的，引用arcs的数字正值表示顺序，负值表示逆序。

-

介绍完GeoJSON与TopoJSON，来讲一讲我在工作中遇到的需求。

![](地图数据中的GeoJson与TopoJson/1.png)
如图所示：当选中了地图中的两个相连的区域时，区域公共边依然会显示出来，需求是连续的区域不显示公共边。但由于GeoJSON中的边缘信息时分别存储于每一个Geometry中，所以想要找到所有重叠的公共点有很高的时间复杂度，因此考虑将GeoJSON转换为TopoJSON处理。

GeoJSON与TopoJSON的互相转换可以通过TopoJSON提供的转换器实现：

<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install topojsongeo2topo geo.json &gt; topo.json npm install topojson-clienttopo2geo states=geo.json &lt; topo.json</div></pre></td></tr></table></figure>


注意states需要是TopoJSON中存在的对象名。  

TopoJSON由于将公共边提取出来一同存储，并且还提供了merge函数用于区域合并，因此使用TopoJSON可以轻松实现以上需求，同时还能减小地图数据文件的体积。  

示例代码如下：

``` HTML
&lt;!DOCTYPE html&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;style&gt;

.state {
  fill: #DDD;
  stroke: #FFF;
}

.state.selected {
  fill: #0CF;
  stroke: #000;
}

&lt;/style&gt;
&lt;body&gt;
&lt;script src=&quot;https://d3js.org/d3.v3.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://d3js.org/topojson.v2.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
 var width = 960,
  height = 600;

  var projection = d3.geo.mercator()
    .translate([-width / 1.2, height * 1.2])
    .scale((width) / 1.5);

  var path = d3.geo.path()
   .projection(projection);

  var svg = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
    .attr(&quot;width&quot;, width)
    .attr(&quot;height&quot;, height);

  var selected = d3.set([
  &quot;CHN_西藏&quot;,
  &quot;CHN_新疆&quot;,
  &quot;CHN_青海&quot;
  ]);

  d3.json(&quot;out.json&quot;, function(error, china) {
  if (error) throw error;

  var rr = svg.append(&quot;path&quot;)
      .datum(topojson.feature(china, china.objects.geo))
      .attr(&quot;class&quot;, &quot;state&quot;);
      rr.attr(&quot;d&quot;, path);

  svg.append(&quot;path&quot;)
      .datum(topojson.merge(china, china.objects.geo.geometries.filter(function(d) { return selected.has(d.properties.id); })))
      .attr(&quot;class&quot;, &quot;state selected&quot;)
      .attr(&quot;d&quot;, path);
});
&lt;/script&gt;
</code></pre><h2 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h2><p><a href="http://geojson.org/geojson-spec.html" target="_blank" rel="external">geojson-spec</a><br><a href="https://github.com/topojson/topojson-specification/blob/master/README.md" target="_blank" rel="external">topojson-specification</a><br><a href="http://mapshaper.org/" target="_blank" rel="external">简化、转换 GeoJSON 和 TopoJSON</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/18/python学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LiuY">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LiuY's TechBlog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/18/python学习笔记/" itemprop="url">python学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-18T11:48:49+08:00">
                2016-10-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>注：该笔记为学习hubwiz网站的python公开课时所记录的课程笔记，内容与该课程有较大关联，因此有较多非原创内容，发布到该博客是为了方便自己以后查阅，如侵犯hubwiz相关权力或涉嫌泄露课程内容可联系我（lyssfxz@126.com）删除该博文。</p>
</blockquote>
<h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="标示符"><a href="#标示符" class="headerlink" title="标示符"></a>标示符</h2><p>在python中，标识符由<strong>字母、数字、下划线</strong>组成。</p>
<p>在python中，所有标识符可以包括英文、数字以及下划线（_），但不能以数字开头。</p>
<p>python中的标识符是<strong>区分</strong>大小写的。</p>
<p>以下划线开头的标识符是有特殊意义的。以单下划线开头（_foo）的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用”from xxx import *”而导入；</p>
<p>以双下划线开头的（ <strong> foo）代表类的私有成员；以双下划线开头和结尾的（ </strong> foo <strong> ）代表python里特殊方法专用的标识，如 </strong> init __（）代表类的构造函数。</p>
<h2 id="行和缩进"><a href="#行和缩进" class="headerlink" title="行和缩进"></a>行和缩进</h2><p>学习Python与其他语言最大的区别就是，Python的代码块不使用大括号（{}）来控制类，函数以及其他逻辑判断。python最具特色的就是用缩进来写模块。</p>
<p>缩进的空白数量是可变的，但是所有代码块语句必须包含相同的缩进空白数量，这个必须严格执行。如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">True</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">"True"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">  <span class="keyword">print</span> <span class="string">"False"</span></div></pre></td></tr></table></figure>
<p>由于以上代码的缩进空白不一致，而导致执行错误。因此，在Python的代码块中必须使用相同数目的行首缩进空格数。</p>
<h2 id="多行语句"><a href="#多行语句" class="headerlink" title="多行语句"></a>多行语句</h2><p>Python语句中一般以新行作为语句的结束符。但是我们可以使用斜杠（\）将一行的语句分为多行显示，如下所示：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">total</span> = <span class="keyword">item_one </span>+ \ </div><div class="line">        <span class="keyword">item_two </span>+ \</div><div class="line">        <span class="keyword">item_three</span></div></pre></td></tr></table></figure>
<p>语句中包含[], {} 或 () 括号就不需要使用多行连接符。如下实例：</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">days</span> = [<span class="string">'Monday'</span>, <span class="string">'Tuesday'</span>, <span class="string">'Wednesday'</span>,</div><div class="line">        <span class="string">'Thursday'</span>, <span class="string">'Friday'</span>]</div></pre></td></tr></table></figure>
<p>Python可以在同一行中使用多条语句，语句之间使用分号(;)分割，以下是一个简单的实例：</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta"><span class="meta-keyword">import</span> sys;</span> x = <span class="string">'foo'</span>; sys.stdout.write(x + <span class="string">'\n'</span>)</div></pre></td></tr></table></figure>
<h2 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h2><p>函数之间或类的方法之间用空行分隔，表示一段新的代码的开始。类和函数入口之间也用一行空行分隔，以突出函数入口的开始。</p>
<p>空行与代码缩进不同，空行并不是Python语法的一部分。书写时不插入空行，Python解释器运行也不会出错。但是空行的作用在于分隔两段不同功能或含义的代码，便于日后代码的维护或重构。</p>
<p>注意：空行也是程序代码的一部分。</p>
<h2 id="代码组"><a href="#代码组" class="headerlink" title="代码组"></a>代码组</h2><p>缩进相同的一组语句构成一个代码块，我们称之代码组。像if、while、def和class这样的复合语句，首行以关键字开始，以冒号( : )结束，该行之后的一行或多行代码构成代码组。</p>
<p>我们将首行及后面的代码组称为一个子句(clause)。如下实例：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> expression : </div><div class="line">   suite </div><div class="line">elif expression :  </div><div class="line">   suite  </div><div class="line"><span class="keyword">else</span> :  </div><div class="line">   suite</div></pre></td></tr></table></figure>
<h2 id="保留字"><a href="#保留字" class="headerlink" title="保留字"></a>保留字</h2><p>下面的列表显示了在Python中的保留字。这些保留字不能用作常数或变量，或任何其他标识符名称。所有Python的关键字只包含小写字母。</p>
<p>and exec not assert finally or break for pass class from print continue global raise def if return del import try elif in while else is with except lambda yield</p>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><h2 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h2><p>Python 数字数据类型用于存储数值。数据类型是不允许改变的,这就意味着如果改变数字数据类型得值，将重新分配内存空间。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attr">var1</span> = <span class="number">1</span></div><div class="line"><span class="attr">var2</span> = <span class="number">10</span></div></pre></td></tr></table></figure>
<p>用del语句删除一些数字对象引用，del语句的语法是：</p>
<ul>
<li>del var1[,var2[,var3[….,varN]]]]</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">del</span> var1</div><div class="line"><span class="selector-tag">del</span> var2, var3</div></pre></td></tr></table></figure>
<p>Python 支持四种不同的数值类型：</p>
<ul>
<li><strong>整型(Int)</strong> - 通常被称为是整型或整数，是正或负整数，不带小数点。</li>
<li><strong>长整型(long integers)</strong> - 无限大小的整数，整数最后是一个大写或小写的L。</li>
<li><strong>浮点型(floating point real values)</strong> - 浮点型由整数部分与小数部分组成，浮点型也可以使用科学计数法表示（2.5e2 = 2.5 x 102 = 250）。</li>
<li><strong>复数 (complex numbers)</strong> - 复数的虚部以字母J 或 j结尾 。如：2+3j</li>
</ul>
<p>长整型也可以使用小写”l”，但是还是建议您使用大写”L”，避免与数字”1”混淆。Python使用”L”来显示长整型。</p>
<p>Python还支持复数，复数由实数部分和虚数部分构成，可以用a + bj,或者complex(a,b)表示， 复数的实部a和虚部b都是浮点型。</p>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>字符串是 Python 中最常用的数据类型。我们可以使用引号来创建字符串。</p>
<p>Python 接收单引号(‘ )，双引号(“ )，三引号(“””) 来表示字符串，引号的开始与结束必须的相同类型的。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">word = <span class="string">'word'</span></div><div class="line">sentence = <span class="string">"This is a sentence."</span></div><div class="line">paragraph = <span class="string">"""This is a paragraph. It is</span></div><div class="line"><span class="string">made up of multiple lines and sentences."""</span></div><div class="line"><span class="comment"># 换行符也占一个字符</span></div></pre></td></tr></table></figure>
<p>Python访问子字符串，可以使用方括号([])来截取字符串，如下实例：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var1 = 'Hello World!'</div><div class="line">var2 = <span class="string">"Python Programming"</span></div><div class="line">print <span class="string">"var1[0]: "</span>, var1[0]</div><div class="line">print <span class="string">"var2[1:5]: "</span>, var2[1:5]</div></pre></td></tr></table></figure>
<p>以上实例执行结果：</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var1<span class="string">[0]</span>:  H</div><div class="line">var2<span class="string">[1:5]</span>:  ytho</div></pre></td></tr></table></figure>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p><strong>序列</strong>是Python中最基本的数据结构。序列中的每个元素都分配一个数字 - 它的位置，或索引，第一个索引是0，第二个索引是1，依此类推。</p>
<p><strong>列表</strong>是最常用的Python数据类型，它可以作为一个<strong>方括号</strong>内的<strong>逗号</strong>分隔值出现。列表的数据项<strong>不需要</strong>具有相同的类型。创建一个列表，只要把逗号分隔的不同的数据项使用方括号括起来即可。如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">list1 = [<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>];</div><div class="line">list2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ];</div><div class="line">list3 = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>];</div></pre></td></tr></table></figure>
<p>与字符串的索引一样，列表索引从0开始。列表可以进行截取、组合等。</p>
<p>使用下标索引来访问列表中的值，同样你也可以使用方括号的形式截取字符，如下所示：</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">list1 = [<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>];</div><div class="line">list2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> ];</div><div class="line">print <span class="string">"list1[0]: "</span>, list1[<span class="number">0</span>]</div><div class="line">print <span class="string">"list2[1:5]: "</span>, list2[<span class="number">1</span>:<span class="number">5</span>]</div></pre></td></tr></table></figure>
<p>你可以对列表的数据项进行修改，如下所示：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attr">list</span> = [<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>];</div><div class="line"><span class="attr">list[2]</span> = <span class="number">2001</span>;</div></pre></td></tr></table></figure>
<p>可以使用 del 语句来删除列表的的元素，如下实例：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">list1</span> = [<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>];</div><div class="line"><span class="attribute">del</span> list1[<span class="number">2</span>];</div></pre></td></tr></table></figure>
<h2 id="列表脚本操作符"><a href="#列表脚本操作符" class="headerlink" title="列表脚本操作符"></a>列表脚本操作符</h2><p>列表对 + 和 <em> 的操作符与字符串相似。+ 号用于组合列表，</em> 号用于重复列表。如下表所示：</p>
<table>
<thead>
<tr>
<th>Python 表达式</th>
<th>结果</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>len([1, 2, 3])</td>
<td>3</td>
<td>长度</td>
</tr>
<tr>
<td>[1, 2, 3] + [4, 5, 6]</td>
<td>[1, 2, 3, 4, 5, 6]</td>
<td>组合</td>
</tr>
<tr>
<td>[‘Hi!’] * 4</td>
<td>[‘Hi!’, ‘Hi!’, ‘Hi!’, ‘Hi!’]</td>
<td>重复</td>
</tr>
<tr>
<td>3 in [1, 2, 3]</td>
<td>True</td>
<td>元素是否存在于列表中</td>
</tr>
<tr>
<td>for x in [1, 2, 3]: print x,</td>
<td>1 2 3</td>
<td>迭代</td>
</tr>
</tbody>
</table>
<h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><p>Python的元组与列表类似，不同之处在于元组的元素不能修改。元组使用小括号，列表使用方括号。</p>
<p>元组创建很简单，只需要在括号中添加元素，并使用逗号隔开即可。如下实例：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="attr">tup1</span> = (<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>);</div><div class="line"><span class="attr">tup2</span> = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> );</div><div class="line"><span class="attr">tup3</span> = <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>;</div><div class="line"><span class="attr">tup4</span> = ();    # 创建空元组</div><div class="line"><span class="attr">tup5</span> = (<span class="number">50</span>,); #元组中只包含一个元素时，需要在元素后面添加逗号。</div></pre></td></tr></table></figure>
<p>注意：元组与字符串类似，下标索引从0开始，可以进行截取，组合等。</p>
<p>元组可以使用下标索引来访问元组中的值，如下实例:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">tup1</span> = (<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>);</div><div class="line"><span class="attribute">tup2</span> = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> );</div><div class="line"><span class="attribute">print</span> <span class="string">"tup1[0]: "</span>, tup1[<span class="number">0</span>]  <span class="comment"># 运行结果为：tup1[0]:  physics</span></div><div class="line">print <span class="string">"tup2[1:5]: "</span>, tup2[<span class="number">1</span>:<span class="number">5</span>] <span class="comment"># 运行结果为：tup2[1:5]:  (2, 3, 4, 5)</span></div></pre></td></tr></table></figure>
<p>可以使用del语句来删除整个元组,但是不允许删除元组中的元素。</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">tup</span> = (<span class="string">'physics'</span>, <span class="string">'chemistry'</span>, <span class="number">1997</span>, <span class="number">2000</span>);</div><div class="line"><span class="attribute">del</span> tup;</div></pre></td></tr></table></figure>
<p><strong>元组中的元素值是不允许修改的</strong>，但我们可以对元组进行连接组合，如下实例:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tup1 = (12, 34.56);</div><div class="line">tup2 = ('abc', 'xyz');</div><div class="line">tup3 = tup1 + tup2;</div><div class="line">print tup3;   <span class="comment">#运行结果为：(12, 34.56, 'abc', 'xyz')</span></div></pre></td></tr></table></figure>
<h2 id="元组操作符"><a href="#元组操作符" class="headerlink" title="元组操作符"></a>元组操作符</h2><p>与字符串一样，元组之间可以使用 + 号和 * 号进行运算。</p>
<table>
<thead>
<tr>
<th>Python 表达式</th>
<th>结果</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>len((1, 2, 3))</td>
<td>3</td>
<td>计算元素个数</td>
</tr>
<tr>
<td>(1, 2, 3) + (4, 5, 6)</td>
<td>(1, 2, 3, 4, 5, 6)</td>
<td>连接</td>
</tr>
<tr>
<td>(‘Hi!’,) * 4</td>
<td>(‘Hi!’, ‘Hi!’, ‘Hi!’, ‘Hi!’)</td>
<td>复制</td>
</tr>
<tr>
<td>3 in (1, 2, 3)</td>
<td>True</td>
<td>元素是否存在</td>
</tr>
<tr>
<td>for x in (1, 2, 3): print x,</td>
<td>1 2 3</td>
<td>迭代</td>
</tr>
</tbody>
</table>
<h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><p>字典由键和对应值成对组成。字典也被称作<strong>关联数组</strong>或<strong>哈希表</strong>。基本语法如下：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">dict</span> = &#123;<span class="string">'Alice'</span>: <span class="string">'2341'</span>, <span class="string">'Beth'</span>: <span class="string">'9102'</span>, <span class="string">'Cecil'</span>: <span class="string">'3258'</span>&#125; # 或者</div><div class="line"><span class="attr">dict1</span> = &#123; <span class="string">'abc'</span>: <span class="number">456</span> &#125;;</div><div class="line"><span class="attr">dict2</span> = &#123; <span class="string">'abc'</span>: <span class="number">123</span>, <span class="number">98.6</span>: <span class="number">37</span> &#125;;</div></pre></td></tr></table></figure>
<p>每个键与值用<strong>冒号隔开</strong>（:），每对用逗号分割，整体放在花括号中（{}）。键必须独一无二，但值则不必。值可以取任何数据类型，但必须是不可变的，如字符串，数或元组。</p>
<p>访问字典中值，把相应的键放入熟悉的方括弧，如下实例:</p>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dict</span> = &#123;<span class="string">'Name'</span>: <span class="string">'Zara'</span>, <span class="string">'Age'</span>: <span class="number">7</span>, <span class="string">'Class'</span>: <span class="string">'First'</span>&#125;;</div><div class="line">print <span class="string">"dict['Name']: "</span>, <span class="keyword">dict</span>[<span class="string">'Name'</span>];</div><div class="line">print <span class="string">"dict['Age']: "</span>, <span class="keyword">dict</span>[<span class="string">'Age'</span>];</div></pre></td></tr></table></figure>
<p>我们也可以对字典中的元素进行增加、修改、删除，也可以删除字典，如下实例：</p>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dict</span>[<span class="string">'School'</span>] = <span class="string">"DPS School"</span><span class="comment">; # 增加键为'School'的条目</span></div><div class="line"><span class="keyword">dict</span>[<span class="string">'Name'</span>]=<span class="string">"Jim"</span><span class="comment">;            # 修改键为'Name'的条目的值</span></div><div class="line">del <span class="keyword">dict</span>[<span class="string">'Name'</span>]<span class="comment">;              # 删除键是'Name'的条目</span></div><div class="line"><span class="keyword">dict</span>.clear()<span class="comment">;                  # 清空词典所有条目</span></div><div class="line">del <span class="keyword">dict</span> <span class="comment">;                     # 删除词典</span></div></pre></td></tr></table></figure>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>变量存储在内存中的值。这就意味着在创建变量时会在内存中开辟一个空间。Python中的变量不需要声明，变量的赋值操作既是变量声明和定义的过程。</p>
<p>每个变量在使用前都必须赋值，变量赋值以后该变量才会被创建。等号（=）用来给变量赋值。等号（=）运算符左边是一个变量名,等号（=）运算符右边是存储在变量中的值。例如：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">counter = 100 <span class="comment"># 赋值整型变量</span></div><div class="line">miles = 1000.0 <span class="comment"># 浮点型</span></div><div class="line">name = <span class="string">"John"</span> <span class="comment"># 字符串</span></div></pre></td></tr></table></figure>
<p>Python允许你同时为多个变量赋值。例如：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">j = k = l = <span class="number">1</span> </div><div class="line">a, b, c = <span class="number">1</span>, <span class="number">2</span>, <span class="string">"john"</span>  #<span class="number">1</span>和<span class="number">2</span>分配给变量a和b，字符串对象<span class="string">"john"</span>分配给变量c。</div></pre></td></tr></table></figure>
<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><p>以下假设变量a为10，变量b为20：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>加 - 两个对象相加</td>
<td>a + b 输出结果 30</td>
</tr>
<tr>
<td>-</td>
<td>减 - 得到负数或是一个数减去另一个数</td>
<td>a - b 输出结果 -10</td>
</tr>
<tr>
<td>*</td>
<td>乘 - 两个数相乘或是返回一个被重复若干次的字符串</td>
<td>a * b 输出结果 200</td>
</tr>
<tr>
<td>/</td>
<td>除 - x除以y</td>
<td>b / a 输出结果 2</td>
</tr>
<tr>
<td>%</td>
<td>取模 - 返回除法的余数</td>
<td>b % a 输出结果 0</td>
</tr>
<tr>
<td>**</td>
<td>幂 - 返回x的y次幂</td>
<td>a**b 为10的20次方， 输出结果 100000000000000000000</td>
</tr>
<tr>
<td>//</td>
<td>取整除 - 返回商的整数部分</td>
<td>9//2 输出结果 4 ,9.0//2.0 输出结果 4.0</td>
</tr>
</tbody>
</table>
<h2 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h2><p>以下假设变量a为10，变量b为20：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>==</td>
<td>等于 - 比较对象是否相等</td>
<td>(a == b) 返回 False。</td>
</tr>
<tr>
<td>!=</td>
<td>不等于 - 比较两个对象是否不相等</td>
<td>(a != b) 返回 true.</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>不等于 - 比较两个对象是否不相等</td>
<td>(a &lt;&gt; b) 返回 true。这个运算符类似 != 。</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于 - 返回x是否大于y</td>
<td>(a &gt; b) 返回 False。</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于 - 返回x是否小于y</td>
<td>(a &lt; b) 返回 true。</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于 - 返回x是否大于等于y</td>
<td>(a &gt;= b) 返回 False。</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于 - 返回x是否小于等于y</td>
<td>(a &lt;= b) 返回 true。</td>
</tr>
</tbody>
</table>
<blockquote>
<p>所有比较运算符返回1表示真，返回0表示假。这分别与特殊的变量True和False等价。注意，这些变量名的大写。</p>
</blockquote>
<h2 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h2><table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>简单的赋值运算符</td>
<td>c = a + b 将 a + b 的运算结果赋值为 c</td>
</tr>
<tr>
<td>+=</td>
<td>加法赋值运算符</td>
<td>c += a 等效于 c = c + a</td>
</tr>
<tr>
<td>-=</td>
<td>减法赋值运算符</td>
<td>c -= a 等效于 c = c - a</td>
</tr>
<tr>
<td>*=</td>
<td>乘法赋值运算符</td>
<td>c <em>= a 等效于 c = c </em> a</td>
</tr>
<tr>
<td>/=</td>
<td>除法赋值运算符</td>
<td>c /= a 等效于 c = c / a</td>
</tr>
<tr>
<td>%=</td>
<td>取模赋值运算符</td>
<td>c %= a 等效于 c = c % a</td>
</tr>
<tr>
<td>**=</td>
<td>幂赋值运算符</td>
<td>c <strong>= a 等效于 c = c </strong> a</td>
</tr>
<tr>
<td>//=</td>
<td>取整除赋值运算符</td>
<td>c //= a 等效于 c = c // a</td>
</tr>
</tbody>
</table>
<h2 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h2><p>按位运算符是把数字看作二进制来进行计算的。Python中的按位运算法则如下：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>按位与运算符</td>
<td>(a &amp; b) 输出结果 12 ，二进制解释： 0000 1100</td>
</tr>
<tr>
<td>\</td>
<td></td>
<td>按位或运算符</td>
<td>(a \</td>
<td>b) 输出结果 61 ，二进制解释： 0011 1101</td>
</tr>
<tr>
<td>^</td>
<td>按位异或运算符</td>
<td>(a ^ b) 输出结果 49 ，二进制解释： 0011 0001</td>
</tr>
<tr>
<td>~</td>
<td>按位取反运算符</td>
<td>(~a ) 输出结果 -61 ，二进制解释： 1100 0011， 在一个有符号二进制数的补码形式。</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>左移动运算符</td>
<td>a &lt;&lt; 2 输出结果 240 ，二进制解释： 1111 0000</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>右移动运算符</td>
<td>a &gt;&gt; 2 输出结果 15 ，二进制解释： 0000 1111</td>
</tr>
</tbody>
</table>
<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>and</td>
<td>布尔”与” - 如果x为False，x and y返回False，否则它返回y的计算值。</td>
<td>(a and b) 返回 true。</td>
</tr>
<tr>
<td>or</td>
<td>布尔”或” - 如果x是True，它返回True，否则它返回y的计算值。</td>
<td>(a or b) 返回 true。</td>
</tr>
<tr>
<td>not</td>
<td>布尔”非” - 如果x为True，返回False。如果x为False，它返回True。</td>
<td>not(a and b) 返回 false。</td>
</tr>
</tbody>
</table>
<h2 id="成员运算符"><a href="#成员运算符" class="headerlink" title="成员运算符"></a>成员运算符</h2><p>除了以上的一些运算符之外，Python还支持成员运算符，测试实例中包含了一系列的成员，包括字符串，列表或元组。</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>in</td>
<td>如果在指定的序列中找到值返回True，否则返回False。</td>
<td>x 在 y序列中 , 如果x在y序列中返回True。</td>
</tr>
<tr>
<td>not in</td>
<td>如果在指定的序列中没有找到值返回True，否则返回False。</td>
<td>x 不在 y序列中 , 如果x不在y序列中返回True。</td>
</tr>
</tbody>
</table>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="builtin-name">print</span> (1 <span class="keyword">in</span> (1,2))</div><div class="line"><span class="builtin-name">print</span> (1 <span class="keyword">not</span> <span class="keyword">in</span> (1,2))</div></pre></td></tr></table></figure>
<h2 id="身份运算符"><a href="#身份运算符" class="headerlink" title="身份运算符"></a>身份运算符</h2><p>身份运算符用于比较两个对象的存储单元。</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>is</td>
<td>is是判断两个标识符是不是引用自一个对象</td>
<td>x is y, 如果 id(x) 等于 id(y) , <strong>is</strong> 返回结果 1</td>
</tr>
<tr>
<td>is not</td>
<td>is not是判断两个标识符是不是引用自不同对象</td>
<td>x is not y, 如果 id(x) 不等于 id(y). <strong>is not</strong> 返回结果 1</td>
</tr>
</tbody>
</table>
<h2 id="运算符的优先级"><a href="#运算符的优先级" class="headerlink" title="运算符的优先级"></a>运算符的优先级</h2><p>以下表格列出了从最高到最低优先级的所有运算符：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>**</td>
<td>指数 (最高优先级)</td>
</tr>
<tr>
<td>~ + -</td>
<td>按位翻转, 一元加号和减号 (最后两个的方法名为 +@ 和 -@)</td>
</tr>
<tr>
<td>* / % //</td>
<td>乘，除，取模和取整除</td>
</tr>
<tr>
<td>+ -</td>
<td>加法减法</td>
</tr>
<tr>
<td>&gt;&gt; &lt;&lt;</td>
<td>右移，左移运算符</td>
</tr>
<tr>
<td>&amp;</td>
<td>位 ‘AND’</td>
</tr>
<tr>
<td>^</td>
<td>\</td>
<td>位运算符</td>
</tr>
<tr>
<td>&lt;= &lt; &gt; &gt;=</td>
<td>比较运算符</td>
</tr>
<tr>
<td>&lt;&gt; == !=</td>
<td>等于运算符</td>
</tr>
<tr>
<td>= %= /= //= -= += <em>= *</em>=</td>
<td>赋值运算符</td>
</tr>
<tr>
<td>is is not</td>
<td>身份运算符</td>
</tr>
<tr>
<td>in not in</td>
<td>成员运算符</td>
</tr>
<tr>
<td>not or and</td>
<td>逻辑运算符</td>
</tr>
</tbody>
</table>
<h1 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h1><h2 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h2><p>Python条件语句是通过一条或多条语句的执行结果（True或者False）来决定执行的代码块。用if语句可以构成分支结构。它根据给定的条件进行判断，以决定执行某个分支程序段。</p>
<p>第一种形式为：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (表达式) :  </div><div class="line">    语句<span class="number">1</span>  </div><div class="line"><span class="keyword">else</span> :  </div><div class="line">    语句<span class="number">2</span></div></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">flag = <span class="keyword">False</span></div><div class="line">name = <span class="string">'luren'</span></div><div class="line"><span class="keyword">if</span> name == <span class="string">'python'</span>:         <span class="comment"># 判断变量否为'python'</span></div><div class="line">   flag = <span class="keyword">True</span>          <span class="comment"># 条件成立时设置标志为真</span></div><div class="line">   <span class="keyword">print</span> <span class="string">'welcome boss'</span>    <span class="comment"># 并输出欢迎信息</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> name              <span class="comment"># 条件不成立时输出变量名称</span></div></pre></td></tr></table></figure>
<p>第二种形式为:</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (表达式) :  </div><div class="line">    语句<span class="number">1</span>  </div><div class="line">elif (表达式) :  </div><div class="line">    语句<span class="number">2</span>  </div><div class="line">    …  </div><div class="line">elif (表达式) :  </div><div class="line">    语句n  </div><div class="line"><span class="keyword">else</span> :  </div><div class="line">    语句m</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">num = 5     </div><div class="line"><span class="keyword">if</span> num == 3:            <span class="comment"># 判断num的值</span></div><div class="line">    <span class="built_in">print</span> <span class="string">'boss'</span>        </div><div class="line"><span class="keyword">elif</span> num == 2:</div><div class="line">    <span class="built_in">print</span> <span class="string">'user'</span></div><div class="line"><span class="keyword">elif</span> num == 1:</div><div class="line">    <span class="built_in">print</span> <span class="string">'worker'</span></div><div class="line"><span class="keyword">elif</span> num &lt; 0:           <span class="comment"># 值小于零时输出</span></div><div class="line">    <span class="built_in">print</span> <span class="string">'error'</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="built_in">print</span> <span class="string">'roadman'</span>     <span class="comment"># 条件均不成立时输出</span></div></pre></td></tr></table></figure>
<p>第三种形式为:(强行第三种)</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (表达式<span class="number">1</span>) :  </div><div class="line">   <span class="keyword">if</span> (表达式<span class="number">2</span>) :  </div><div class="line">       语句<span class="number">1</span>  </div><div class="line">   elif (表达式<span class="number">3</span>) :  </div><div class="line">       语句<span class="number">2</span>  </div><div class="line">        …  </div><div class="line">   <span class="keyword">else</span>:  </div><div class="line">       语句<span class="number">3</span>  </div><div class="line"><span class="keyword">else</span> :  </div><div class="line">    …</div></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">num</span> = <span class="number">9</span></div><div class="line"><span class="keyword">if</span> <span class="built_in">num</span> &gt;= <span class="number">0</span> and <span class="built_in">num</span> &lt;= <span class="number">10</span>:    # 判断值是否在<span class="number">0</span>~<span class="number">10</span>之间</div><div class="line">    <span class="built_in">print</span> <span class="string">'HELLO'</span></div><div class="line">    <span class="keyword">if</span> <span class="built_in">num</span> &gt; <span class="number">10</span>:    # 判断值是否大于<span class="number">10</span></div><div class="line">       <span class="built_in">print</span> <span class="string">'world'</span></div><div class="line">    elif <span class="built_in">num</span>&gt;=<span class="number">0</span>:</div><div class="line">       <span class="built_in">print</span> <span class="string">'WORLD'</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="built_in">print</span> <span class="string">'undefine'</span></div></pre></td></tr></table></figure>
<h2 id="while语句"><a href="#while语句" class="headerlink" title="while语句"></a>while语句</h2><p>Python 编程中 while 语句用于循环执行程序，即在某条件下，循环执行某段程序，以处理需要重复处理的相同任务。其基本形式为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> 判断条件：</div><div class="line">    执行语句……</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">count</span> = <span class="number">0</span></div><div class="line"><span class="keyword">while</span> (<span class="built_in">count</span> &lt; <span class="number">9</span>):</div><div class="line">   <span class="built_in">print</span> '<span class="type">The</span> <span class="built_in">count</span> <span class="keyword">is</span>:', <span class="built_in">count</span></div><div class="line">   <span class="built_in">count</span> = <span class="built_in">count</span> + <span class="number">1</span></div><div class="line"> </div><div class="line"><span class="built_in">print</span> <span class="string">"Good bye!"</span></div></pre></td></tr></table></figure>
<p>在 python 中，while … else 表示这样的意思，while 中的语句和普通的没有区别，<strong>else 中的语句会在循环正常执行完的情况下执行</strong>。其格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> 判断条件：</div><div class="line">      语句组</div><div class="line"><span class="keyword">else</span>:</div><div class="line">      语句组</div></pre></td></tr></table></figure>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">count</span> = <span class="number">0</span></div><div class="line"><span class="keyword">while</span> <span class="keyword">count</span> &lt; <span class="number">5</span>:</div><div class="line">     <span class="keyword">print</span> <span class="keyword">count</span>, <span class="string">" is  less than 5"</span></div><div class="line">     <span class="keyword">count</span> = <span class="keyword">count</span> + <span class="number">1</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">     <span class="keyword">print</span> <span class="keyword">count</span>, <span class="string">" is not less than 5"</span></div></pre></td></tr></table></figure>
<h2 id="for语句"><a href="#for语句" class="headerlink" title="for语句"></a>for语句</h2><p>Python for循环可以遍历任何序列的项目，如一个列表或者一个字符串。for循环的第一种语法格式如下：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> iterating_var <span class="keyword">in</span> <span class="string">sequence:</span></div><div class="line">   statements(s)</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> <span class="string">'Python'</span>:     <span class="comment"># First Example</span></div><div class="line">   <span class="built_in">print</span> <span class="string">'Current Letter :'</span>, letter</div><div class="line"></div><div class="line">fruits = [<span class="string">'banana'</span>, <span class="string">'apple'</span>,  <span class="string">'mango'</span>]</div><div class="line"><span class="keyword">for</span> fruit <span class="keyword">in</span> fruits:        <span class="comment"># Second Example</span></div><div class="line">   <span class="built_in">print</span> <span class="string">'Current fruit :'</span>, fruit</div></pre></td></tr></table></figure>
<p>在 python 中，for … else 表示这样的意思，for 中的语句和普通的没有区别，<strong>else 中的语句会在循环正常执行完的情况下执行</strong>。如下格式：</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> iterating_var in sequence:</div><div class="line">      <span class="built_in">statements</span>(s)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">      <span class="built_in">statements</span>(s1)</div></pre></td></tr></table></figure>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">num</span>=<span class="number">10</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>,<span class="built_in">num</span>): <span class="comment">#to iterate on the factors of the number</span></div><div class="line">   <span class="keyword">if</span> <span class="built_in">num</span>%i == <span class="number">0</span>:      <span class="comment">#to determine the first factor</span></div><div class="line">       j=<span class="built_in">num</span>/i          <span class="comment">#to calculate the second factor</span></div><div class="line">       print <span class="string">'%d equals %d * %d'</span> % (<span class="built_in">num</span>,i,j)</div><div class="line"><span class="keyword">else</span>:                  <span class="comment"># else part of the loop</span></div><div class="line">   print <span class="built_in">num</span>, <span class="string">'is a prime number'</span></div><div class="line">以上代码中range返回一个序列的数。</div></pre></td></tr></table></figure>
<p><strong>python不支持类似c的for(i=0;i&lt;5;i++)这样的循环语句，但可以借助range函数模拟</strong>：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(0,5,1):  </div><div class="line">    <span class="builtin-name">print</span> x </div><div class="line"><span class="comment"># 执行结果为： 0 1 2 3 4</span></div></pre></td></tr></table></figure>
<h2 id="break语句"><a href="#break语句" class="headerlink" title="break语句"></a>break语句</h2><p>break语句用来终止循环语句，即循环条件没有False条件或者序列还没被完全递归完，也会停止执行循环语句。break语句用在while和for循环中。</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> <span class="string">'Python'</span>:     <span class="comment"># First Example</span></div><div class="line">   <span class="keyword">if</span> letter == <span class="string">'h'</span>:</div><div class="line">      <span class="keyword">break</span></div><div class="line">   <span class="built_in">print</span> <span class="string">'Current Letter :'</span>, letter</div><div class="line"> </div><div class="line"><span class="keyword">var</span> = <span class="number">10</span>                    <span class="comment"># Second Example</span></div><div class="line"><span class="keyword">while</span> <span class="keyword">var</span> &gt; <span class="number">0</span>:              </div><div class="line">   <span class="built_in">print</span> <span class="string">'Current variable value :'</span>, <span class="keyword">var</span></div><div class="line">   <span class="keyword">var</span> = <span class="keyword">var</span> -<span class="number">1</span></div><div class="line">   <span class="keyword">if</span> <span class="keyword">var</span> == <span class="number">5</span>:</div><div class="line">      <span class="keyword">break</span></div><div class="line"> </div><div class="line"><span class="built_in">print</span> <span class="string">"Good bye!"</span></div></pre></td></tr></table></figure>
<h2 id="continue语句"><a href="#continue语句" class="headerlink" title="continue语句"></a>continue语句</h2><p>continue 语句用来告诉Python跳过当前循环的剩余语句，然后继续进行下一轮循环。continue语句用在while和for循环中。</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> <span class="string">'Python'</span>:     <span class="comment"># First Example</span></div><div class="line">   <span class="keyword">if</span> letter == <span class="string">'h'</span>:</div><div class="line">      <span class="keyword">continue</span></div><div class="line">   <span class="built_in">print</span> <span class="string">'Current Letter :'</span>, letter</div><div class="line"> </div><div class="line"><span class="keyword">var</span> = <span class="number">10</span>                    <span class="comment"># Second Example</span></div><div class="line"><span class="keyword">while</span> <span class="keyword">var</span> &gt; <span class="number">0</span>:              </div><div class="line">   <span class="keyword">var</span> = <span class="keyword">var</span> -<span class="number">1</span></div><div class="line">   <span class="keyword">if</span> <span class="keyword">var</span> == <span class="number">5</span>:</div><div class="line">      <span class="keyword">continue</span></div><div class="line">   <span class="built_in">print</span> <span class="string">'Current variable value :'</span>, <span class="keyword">var</span></div><div class="line"><span class="built_in">print</span> <span class="string">"Good bye!"</span></div></pre></td></tr></table></figure>
<h2 id="pass语句"><a href="#pass语句" class="headerlink" title="pass语句"></a>pass语句</h2><p>pass是空语句，是为了保持程序结构的完整性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> <span class="string">'Python'</span>: </div><div class="line">   <span class="keyword">if</span> letter == <span class="string">'h'</span>:</div><div class="line">      <span class="keyword">pass</span></div><div class="line">      <span class="keyword">print</span> <span class="string">'This is pass block'</span></div><div class="line">   <span class="keyword">print</span> <span class="string">'Current Letter :'</span>, letter</div><div class="line"> </div><div class="line"><span class="keyword">print</span> <span class="string">"Good bye!"</span></div></pre></td></tr></table></figure>
<h2 id="example"><a href="#example" class="headerlink" title="example"></a>example</h2><p>以下实例使用了嵌套循环输出2~100之间的素数：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">i = <span class="number">2</span></div><div class="line"><span class="keyword">while</span>(i &lt; <span class="number">100</span>):</div><div class="line">   j = <span class="number">2</span></div><div class="line">   <span class="keyword">while</span>(j &lt;= (i/j)):</div><div class="line">      <span class="keyword">if</span> <span class="keyword">not</span>(i%j): <span class="keyword">break</span></div><div class="line">      j = j + <span class="number">1</span></div><div class="line">   <span class="keyword">if</span> (j &gt; i/j) : <span class="keyword">print</span> i, <span class="string">" 是素数"</span></div><div class="line">   i = i + <span class="number">1</span></div><div class="line"> </div><div class="line"><span class="keyword">print</span> <span class="string">"Good bye!"</span></div></pre></td></tr></table></figure>
<p>求100的阶乘</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">factorial</span> = <span class="number">1</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">100</span>):</div><div class="line">    <span class="built_in">factorial</span> *= i</div><div class="line"><span class="built_in">print</span> <span class="built_in">factorial</span></div></pre></td></tr></table></figure>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="函数的定义"><a href="#函数的定义" class="headerlink" title="函数的定义"></a>函数的定义</h2><p>函数是组织好的，可重复使用的，用来实现单一，或相关联功能的代码段。</p>
<p>定义一个由自己想要功能的函数，以下是简单的规则：</p>
<ul>
<li>函数代码块以def关键词开头，后接函数标识符名称和圆括号()。</li>
<li>任何传入参数和自变量必须放在圆括号中间。圆括号之间可以用于定义参数。</li>
<li>函数的第一行语句可以选择性地使用文档字符串—用于存放函数说明。</li>
<li>函数内容以冒号起始，并且缩进。</li>
<li>Return[expression]结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回None。</li>
</ul>
<p>语法定义格式如下：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">functionname</span><span class="params">( parameters )</span></span><span class="symbol">:</span></div><div class="line">   <span class="string">"函数_文档字符串"</span></div><div class="line">   function_suite</div><div class="line">   <span class="keyword">return</span> [expression]</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span><span class="params">( str )</span>:</span></div><div class="line">   <span class="string">"打印传入的字符串到标准显示设备上"</span></div><div class="line">   <span class="keyword">print</span> str</div><div class="line">   <span class="keyword">return</span></div></pre></td></tr></table></figure>
<h2 id="函数的调用"><a href="#函数的调用" class="headerlink" title="函数的调用"></a>函数的调用</h2><p>定义一个函数只给了函数一个名称，指定了函数里包含的参数，和代码块结构。这个函数的基本结构完成以后，你可以通过另一个函数调用执行，也可以直接从Python提示符执行。</p>
<p>如下实例调用了printme（）函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Function definition is here</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span><span class="params">( str )</span>:</span></div><div class="line">   <span class="string">"打印任何传入的字符串"</span></div><div class="line">   <span class="keyword">print</span> str;</div><div class="line">   <span class="keyword">return</span>;</div><div class="line"> </div><div class="line"><span class="comment"># Now you can call printme function</span></div><div class="line">printme(<span class="string">"我要调用用户自定义函数!"</span>);</div><div class="line">printme(<span class="string">"再次调用同一函数"</span>);</div></pre></td></tr></table></figure>
<h2 id="传递参数"><a href="#传递参数" class="headerlink" title="传递参数"></a>传递参数</h2><p><strong>所有参数（自变量）在Python里都是按引用传递</strong>。如果你在函数里修改了参数，那么在调用这个函数的函数里，原始的参数也被改变了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 可写函数说明</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">changeme</span><span class="params">( mylist )</span>:</span></div><div class="line">   <span class="string">"修改传入的列表"</span></div><div class="line">   mylist.append([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]);</div><div class="line">   <span class="keyword">print</span> <span class="string">"函数内取值: "</span>, mylist</div><div class="line">   <span class="keyword">return</span></div><div class="line"> </div><div class="line"><span class="comment"># 调用changeme函数</span></div><div class="line">mylist = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>];</div><div class="line">changeme( mylist );</div><div class="line"><span class="keyword">print</span> <span class="string">"函数外取值: "</span>, mylist</div></pre></td></tr></table></figure>
<p>传入函数的和在末尾添加新内容的对象用的是同一个引用。故输出结果如下：</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">函数内取值:  <span class="comment">[10, 20, 30, <span class="comment">[1, 2, 3, 4]</span>]</span></div><div class="line">函数外取值:  <span class="comment">[10, 20, 30, <span class="comment">[1, 2, 3, 4]</span>]</span></div></pre></td></tr></table></figure>
<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><p>用lambda关键词能创建小型匿名函数。这种函数得名于省略了用def声明函数的标准步骤。</p>
<ul>
<li>Lambda函数能接收任何数量的参数但只能返回一个表达式的值，同时只能不能包含命令或多个表达式。</li>
<li>匿名函数不能直接调用print，因为lambda需要一个表达式。</li>
<li>lambda函数拥有自己的名字空间，且不能访问自有参数列表之外或全局名字空间里的参数。</li>
<li>虽然lambda函数看起来只能写一行，却不等同于C或C++的内联函数，后者的目的是调用小函数时不占用栈内存从而增加运行效率。</li>
</ul>
<p>lambda函数的语法格式如下：</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lambda [arg1 [,arg2,.....argn]]:expression</div></pre></td></tr></table></figure>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sum</span> = <span class="built_in">lambda</span> arg1, arg2: arg1 + arg2;</div><div class="line"> </div><div class="line">#调用<span class="built_in">sum</span>函数</div><div class="line"><span class="built_in">print</span> <span class="string">"Value of total : "</span>, <span class="built_in">sum</span>( <span class="number">10</span>, <span class="number">20</span> )</div><div class="line"><span class="built_in">print</span> <span class="string">"Value of total : "</span>, <span class="built_in">sum</span>( <span class="number">20</span>, <span class="number">20</span> )</div></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Value <span class="keyword">of</span> total :  30</div><div class="line">Value <span class="keyword">of</span> total :  40</div></pre></td></tr></table></figure>
<h2 id="return语句"><a href="#return语句" class="headerlink" title="return语句"></a>return语句</h2><p>return语句[表达式]退出函数，选择性地向调用方返回一个表达式。不带参数值的return语句返回None。</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># 可写函数说明</div><div class="line">def <span class="built_in">sum</span>( arg1, arg2 ):</div><div class="line">   # 返回2个参数的和."</div><div class="line">   <span class="keyword">total</span> = arg1 + arg2</div><div class="line">   <span class="keyword">print</span> <span class="string">"Inside the function : "</span>, <span class="keyword">total</span></div><div class="line">   <span class="keyword">return</span> <span class="keyword">total</span>;</div><div class="line"> </div><div class="line"># 调用<span class="keyword">sum</span>函数</div><div class="line"><span class="keyword">total</span> = <span class="built_in">sum</span>( 10, 20 );</div><div class="line"><span class="keyword">print</span> <span class="string">"Outside the function : "</span>, <span class="keyword">total</span></div></pre></td></tr></table></figure>
<h1 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h1><h2 id="import语句"><a href="#import语句" class="headerlink" title="import语句"></a>import语句</h2><p>简单地说，模块就是一个保存了Python代码的文件。模块能定义函数，类和变量。模块里也能包含可执行的代码。</p>
<p>一个叫做aname的模块里的Python代码一般都能在一个叫aname.py的文件中找到。下例是个简单的模块support.py。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_func</span><span class="params">( par )</span>:</span></div><div class="line">   <span class="keyword">print</span> <span class="string">"Hello : "</span>, par</div><div class="line">   <span class="keyword">return</span></div></pre></td></tr></table></figure>
<p>想使用Python源文件，只需在另一个源文件里执行import语句，语法如下：</p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="keyword">module</span><span class="number">1</span>[, <span class="keyword">module</span><span class="number">2</span>[,... moduleN]</div></pre></td></tr></table></figure>
<p>如下例子：</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># 导入模块</span></div><div class="line"><span class="keyword">import</span> support</div><div class="line"><span class="meta"># 现在可以调用模块里包含的函数了</span></div><div class="line"><span class="title">support</span>.print_func(<span class="string">"Zara"</span>)</div></pre></td></tr></table></figure>
<h2 id="from…import"><a href="#from…import" class="headerlink" title="from…import"></a>from…import</h2><p>Python的from语句让你从模块中导入一个指定的部分到当前命名空间中。语法如下：</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> modname <span class="keyword">import</span> name1[, name2[, ... nameN]]</div></pre></td></tr></table></figure>
<p>例如，要导入模块fib的fibonacci函数，使用如下语句：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> fib <span class="keyword">import</span> fibonacci</div></pre></td></tr></table></figure>
<h2 id="from…import-1"><a href="#from…import-1" class="headerlink" title="from…import*"></a>from…import*</h2><p>把一个模块的所有内容全都导入到当前的命名空间也是可行的，只需使用如下声明：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> modname <span class="keyword">import</span> *</div></pre></td></tr></table></figure>
<p>这提供了一个简单的方法来导入一个模块中的所有项目。然而这种声明不该被过多地使用。</p>
<h2 id="reload函数"><a href="#reload函数" class="headerlink" title="reload函数"></a>reload函数</h2><p>当一个模块被导入到一个脚本，模块顶层部分的代码只会被执行一次。因此，如果你想重新执行模块里顶层部分的代码，可以用reload()函数。该函数会重新导入之前导入过的模块。语法如下：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">reload</span><span class="params">(module_name)</span></span></div></pre></td></tr></table></figure>
<p>在这里，module_name要直接放模块的名字，而不是一个字符串形式。比如想重载hello模块，如下：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">reload</span><span class="params">(hello)</span></span></div></pre></td></tr></table></figure>
<h1 id="文件I-O"><a href="#文件I-O" class="headerlink" title="文件I/O"></a>文件I/O</h1><h2 id="open函数"><a href="#open函数" class="headerlink" title="open函数"></a>open函数</h2><p>Python内置的open()函数打开一个文件，创建一个file对象，相关的辅助方法才可以调用它进行读写。语法为：</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">file object = <span class="keyword">open</span>(file_name <span class="comment">[, access_mode]</span><span class="comment">[, buffering]</span>)</div></pre></td></tr></table></figure>
<p>各个参数的细节如下：</p>
<ul>
<li><p>file_name：file_name变量是一个包含了你要访问的文件名称的字符串值。</p>
</li>
<li><p>access_mode：access_mode决定了打开文件的模式：只读，写入，追加等。所有可取值见如下的完全列表。这个参数是非强制的，默认文件访问模式为只读(r)。</p>
</li>
<li><p>buffering:如果buffering的值被设为0，就不会有寄存。如果buffering的值取1，访问文件时会寄存行。如果将buffering的值设为大于1的整数，表明了这就是的寄存区的缓冲大小。如果取负值，寄存区的缓冲大小则为系统默认。</p>
</li>
</ul>
<p>不同模式打开文件的完全列表：</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</td>
</tr>
<tr>
<td>rb</td>
<td>以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。</td>
</tr>
<tr>
<td>r+</td>
<td>打开一个文件用于读写。文件指针将会放在文件的开头。</td>
</tr>
<tr>
<td>rb+</td>
<td>以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。</td>
</tr>
<tr>
<td>w</td>
<td>打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>wb</td>
<td>以二进制格式打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>w+</td>
<td>打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>wb+</td>
<td>以二进制格式打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>a</td>
<td>打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td>ab</td>
<td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td>a+</td>
<td>打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</td>
</tr>
<tr>
<td>ab+</td>
<td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</td>
</tr>
</tbody>
</table>
<h2 id="close函数"><a href="#close函数" class="headerlink" title="close函数"></a>close函数</h2><p>File对象的close（）方法刷新缓冲区里任何还没写入的信息，并关闭该文件，这之后便不能再进行写入。当一个文件对象的引用被重新指定给另一个文件时，Python会关闭之前的文件。语法为：</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fileObject.close()<span class="comment">;</span></div></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 打开一个文件</div><div class="line"><span class="keyword">fo</span> = <span class="keyword">open</span>(<span class="string">"foo.txt"</span>, <span class="string">"wb"</span>)</div><div class="line"><span class="keyword">print</span> <span class="string">"Name of the file: "</span>, <span class="keyword">fo</span>.name</div><div class="line"> </div><div class="line"># 关闭打开的文件</div><div class="line"><span class="keyword">fo</span>.<span class="keyword">close</span>()</div></pre></td></tr></table></figure>
<h2 id="File对象的属性"><a href="#File对象的属性" class="headerlink" title="File对象的属性"></a>File对象的属性</h2><p>一个文件被打开后，你有一个file对象，你可以得到有关该文件的各种信息。以下是和file对象相关的所有属性的列表:</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>file.closed</td>
<td>返回true如果文件已被关闭，否则返回false。</td>
</tr>
<tr>
<td>file.mode</td>
<td>返回被打开文件的访问模式。</td>
</tr>
<tr>
<td>file.name</td>
<td>返回文件的名称。</td>
</tr>
<tr>
<td>file.softspace</td>
<td>如果用print输出后，必须跟一个空格符，则返回false。否则返回true。</td>
</tr>
</tbody>
</table>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 打开一个文件</div><div class="line"><span class="keyword">fo</span> = <span class="keyword">open</span>(<span class="string">"foo.txt"</span>, <span class="string">"wb"</span>)</div><div class="line"><span class="keyword">print</span> <span class="string">"Name of the file: "</span>, <span class="keyword">fo</span>.name</div><div class="line"><span class="keyword">print</span> <span class="string">"Closed or not : "</span>, <span class="keyword">fo</span>.closed</div><div class="line"><span class="keyword">print</span> <span class="string">"Opening mode : "</span>, <span class="keyword">fo</span>.<span class="keyword">mode</span></div><div class="line"><span class="keyword">print</span> <span class="string">"Softspace flag : "</span>, <span class="keyword">fo</span>.softspace</div></pre></td></tr></table></figure>
<h2 id="read函数"><a href="#read函数" class="headerlink" title="read函数"></a>read函数</h2><p>read（）方法从一个打开的文件中读取一个字符串。语法：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fileObject.<span class="built_in">read</span>([<span class="built_in">count</span>]);</div></pre></td></tr></table></figure>
<p>在这里，被传递的参数是要从已打开文件中读取的字节计数。该方法从文件的开头开始读入，如果没有传入count，它会尝试尽可能多地读取更多的内容，很可能是直到文件的末尾。</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 打开一个文件</span></div><div class="line">fo = open(<span class="string">"/tmp/foo.txt"</span>, <span class="string">"r+"</span>)</div><div class="line">str = fo.read(10);</div><div class="line">print <span class="string">"Read String is : "</span>, str</div><div class="line"><span class="comment"># 关闭打开的文件</span></div><div class="line">fo.close()</div></pre></td></tr></table></figure>
<h2 id="write函数"><a href="#write函数" class="headerlink" title="write函数"></a>write函数</h2><p>Write()方法可将任何字符串写入一个打开的文件。Write()方法不在字符串的结尾不添加换行符(‘\n’)。语法为：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fileObject.<span class="built_in">write</span>(<span class="built_in">string</span>);</div></pre></td></tr></table></figure>
<p>在这里，被传递的参数是要写入到已打开文件的内容。</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># 打开一个文件</span></div><div class="line">fo = <span class="keyword">open</span>(<span class="string">"/tmp/foo.txt"</span>, <span class="string">"wb"</span>)</div><div class="line">fo.write( <span class="string">"Python is a great language.\nYeah its great!!\n"</span>);</div><div class="line"><span class="meta"># 关闭打开的文件</span></div><div class="line">fo.<span class="built_in">close</span>()</div></pre></td></tr></table></figure>
<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><h2 id="try-except"><a href="#try-except" class="headerlink" title="try/except"></a>try/except</h2><p>捕捉异常可以使用try/except语句。try/except语句用来检测try语句块中的错误，从而让except语句捕获异常信息并处理。如果你不想在异常发生时结束你的程序，只需在try里捕获它。语法：</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">try:</div><div class="line"><span class="variable">&lt;语句&gt;</span>        <span class="comment">#运行别的代码</span></div><div class="line">except <span class="variable">&lt;名字&gt;</span>：</div><div class="line"><span class="variable">&lt;语句&gt;</span>        <span class="comment">#如果在try部份引发了'name'异常</span></div><div class="line">except <span class="variable">&lt;名字&gt;</span>，<span class="variable">&lt;数据&gt;</span>:</div><div class="line"><span class="variable">&lt;语句&gt;</span>        <span class="comment">#如果引发了'name'异常，获得附加的数据</span></div><div class="line">else:</div><div class="line"><span class="variable">&lt;语句&gt;</span>        <span class="comment">#如果没有异常发生</span></div></pre></td></tr></table></figure>
<p>如下面例子所示</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">try</span>:</div><div class="line">   fh = <span class="built_in">open</span>(<span class="string">"testfile"</span>, <span class="string">"w"</span>)</div><div class="line">   fh.<span class="built_in">write</span>(<span class="string">"This is my test file for exception handling!!"</span>)</div><div class="line">except IOError:</div><div class="line">   <span class="built_in">print</span> <span class="string">"Error: can\'t find file or read data"</span></div><div class="line"><span class="built_in">else</span>:</div><div class="line">   <span class="built_in">print</span> <span class="string">"Written content in the file successfully"</span></div><div class="line">   fh.<span class="built_in">close</span>()</div></pre></td></tr></table></figure>
<h2 id="try-finally"><a href="#try-finally" class="headerlink" title="try-finally"></a>try-finally</h2><p>try-finally 语句无论是否发生异常都将执行最后的代码。语法为：</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">try:</span></div><div class="line"><span class="params">&lt;语句&gt;</span></div><div class="line"><span class="symbol">finally:</span></div><div class="line"><span class="params">&lt;语句&gt;</span>    <span class="meta">#退出try时总会执行</span></div><div class="line">raise</div></pre></td></tr></table></figure>
<p>注意：你可以使用except语句或者finally语句，但是两者不能同时使用。else语句也不能与finally语句同时使用。例如：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">   fh = <span class="keyword">open</span>(<span class="string">"testfile"</span>, <span class="string">"w"</span>)</div><div class="line">   fh.<span class="keyword">write</span>(<span class="string">"This is my test file for exception handling!!"</span>)</div><div class="line"><span class="keyword">finally</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Error: can\'t find file or read data"</span></div></pre></td></tr></table></figure>
<h1 id="类（class）"><a href="#类（class）" class="headerlink" title="类（class）"></a>类（class）</h1><h2 id="创建类"><a href="#创建类" class="headerlink" title="创建类"></a>创建类</h2><p>类(Class): 用来描述具有相同的属性和方法的对象的集合。它定义了该集合中每个对象所共有的属性和方法。对象是类的实例。 使用class语句来创建一个新类，class之后为类的名称并以冒号结尾，如下实例:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassName</span>:</span></div><div class="line">   <span class="string">'类的帮助信息'</span>   <span class="comment">#类文档字符串</span></div><div class="line">   class_suite  <span class="comment">#类体</span></div></pre></td></tr></table></figure>
<p>下面代码就创建了一个名为Employee的类.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span>:</span></div><div class="line">   <span class="comment"># '所有员工的基类'</span></div><div class="line">   empCount = <span class="number">0</span></div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(<span class="keyword">self</span>, name, salary)</span></span><span class="symbol">:</span></div><div class="line">      <span class="keyword">self</span>.name = name</div><div class="line">      <span class="keyword">self</span>.salary = salary</div><div class="line">      Employee.empCount += <span class="number">1</span></div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">displayCount</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></div><div class="line">     print <span class="string">"Total Employee %d"</span> % Employee.empCount</div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">displayEmployee</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></div><div class="line">      print <span class="string">"Name : "</span>, <span class="keyword">self</span>.name,  <span class="string">", Salary: "</span>, <span class="keyword">self</span>.salary</div></pre></td></tr></table></figure>
<p>如下代码创建Employee的实例。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># "创建 Employee 类的第一个对象"</span></div><div class="line"><span class="attr">emp1</span> = Employee(<span class="string">"Zara"</span>, <span class="number">2000</span>)</div><div class="line"><span class="comment"># "创建 Employee 类的第二个对象"</span></div><div class="line"><span class="attr">emp2</span> = Employee(<span class="string">"Manni"</span>, <span class="number">5000</span>)</div></pre></td></tr></table></figure>
<h2 id="访问属性"><a href="#访问属性" class="headerlink" title="访问属性"></a>访问属性</h2><p>可以使用点(.)来访问对象的属性。使用如下类的名称访问类变量:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 定义类</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span>:</span></div><div class="line">   <span class="comment"># '所有员工的基类'</span></div><div class="line">   empCount = <span class="number">0</span></div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(<span class="keyword">self</span>, name, salary)</span></span><span class="symbol">:</span></div><div class="line">      <span class="keyword">self</span>.name = name</div><div class="line">      <span class="keyword">self</span>.salary = salary</div><div class="line">      Employee.empCount += <span class="number">1</span></div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">displayCount</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></div><div class="line">     print <span class="string">"Total Employee %d"</span> % Employee.empCount</div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">displayEmployee</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></div><div class="line">      print <span class="string">"Name : "</span>, <span class="keyword">self</span>.name,  <span class="string">", Salary: "</span>, <span class="keyword">self</span>.salary</div><div class="line"><span class="comment"># "创建 Employee 类的第一个对象"</span></div><div class="line">emp1 = Employee(<span class="string">"Zara"</span>, <span class="number">2000</span>)</div><div class="line"><span class="comment"># "创建 Employee 类的第二个对象"</span></div><div class="line">emp2 = Employee(<span class="string">"Manni"</span>, <span class="number">5000</span>)</div><div class="line"><span class="comment"># 访问类成员</span></div><div class="line">emp1.displayEmployee()</div><div class="line">emp2.displayEmployee()</div></pre></td></tr></table></figure>
<p>我们也可以对类的属性进行修改，增加，删除。</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">emp1.age = <span class="number">7</span>  <span class="meta"># 添加一个 <span class="string">'age'</span> 属性</span></div><div class="line">emp1.age = <span class="number">8</span>  <span class="meta"># 修改 <span class="string">'age'</span> 属性</span></div><div class="line">del emp1.age  <span class="meta"># 删除 <span class="string">'age'</span> 属性</span></div></pre></td></tr></table></figure>
<h2 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h2><p>面向对象的编程带来的主要好处之一是代码的重用，实现这种重用的方法之一是通过继承机制。继承完全可以理解成类之间的类型和子类型关系。</p>
<p>继承语法为 <strong>class 派生类名（基类名）：</strong>//… 基类名写作括号里，基本类是在类定义的时候，在元组之中指明的。</p>
<p>派生类的声明，与他们的父类类似，继承的基类列表跟在类名之后，如下所示：</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="type">SubClassName</span> (<span class="type">ParentClass1</span>[, <span class="type">ParentClass2</span>, ...]):</span></div><div class="line"><span class="class">           '<span class="type">Optional</span> <span class="keyword">class</span> documentation string'</span></div><div class="line"><span class="class">           class_suite</span></div></pre></td></tr></table></figure>
<p>如下继承的例子。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span>:        <span class="comment"># 定义父类</span></span></div><div class="line">   parentAttr = <span class="number">100</span></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></div><div class="line">      print <span class="string">"调用父类构造函数"</span></div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">parentMethod</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></div><div class="line">      print <span class="string">'调用父类方法'</span></div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">setAttr</span><span class="params">(<span class="keyword">self</span>, attr)</span></span><span class="symbol">:</span></div><div class="line">      Parent.parentAttr = attr</div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">getAttr</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></div><div class="line">      print <span class="string">"父类属性 :"</span>, Parent.parentAttr</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span>(<span class="title">Parent</span>): <span class="comment"># 定义子类</span></span></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></div><div class="line">      print <span class="string">"调用子类构造方法"</span></div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">childMethod</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></div><div class="line">      print <span class="string">'调用子类方法 child method'</span></div><div class="line"> </div><div class="line">c = Child()          <span class="comment"># 实例化子类</span></div><div class="line">c.childMethod()      <span class="comment"># 调用子类的方法</span></div><div class="line">c.parentMethod()     <span class="comment"># 调用父类方法</span></div><div class="line">c.setAttr(<span class="number">200</span>)       <span class="comment"># 再次调用父类的方法</span></div><div class="line">c.getAttr()          <span class="comment"># 再次调用父类的方法</span></div></pre></td></tr></table></figure>
<h2 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h2><p>如果你的父类方法的功能不能满足你的需求，你可以在子类重写你父类的方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span>:</span>        <span class="comment"># 定义父类</span></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">myMethod</span><span class="params">(self)</span>:</span></div><div class="line">      <span class="keyword">print</span> <span class="string">'调用父类方法'</span></div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span><span class="params">(Parent)</span>:</span> <span class="comment"># 定义子类</span></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">myMethod</span><span class="params">(self)</span>:</span></div><div class="line">      <span class="keyword">print</span> <span class="string">'调用子类方法'</span></div><div class="line"> </div><div class="line">c = Child()          <span class="comment"># 子类实例</span></div><div class="line">c.myMethod()         <span class="comment"># 子类调用重写方法</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="LiuY" />
          <p class="site-author-name" itemprop="name">LiuY</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LiuY</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
